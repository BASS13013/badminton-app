<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#047857">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Badminton Pro">
    <title>Badminton Pro - Recueil de donn√©es EPS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { 
            -webkit-tap-highlight-color: transparent; 
            -webkit-touch-callout: none;
            font-family: 'Poppins', system-ui, sans-serif;
        }
        input, textarea { -webkit-user-select: text; user-select: text; }
        body { 
            overscroll-behavior: none; 
            margin: 0;
            background: linear-gradient(135deg, #0f766e 0%, #047857 50%, #065f46 100%);
            min-height: 100vh;
        }
        .glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .match-done {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            opacity: 0.7;
        }
        .match-pending {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-in {
            animation: slideIn 0.3s ease-out forwards;
        }
        .badminton-icon {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            box-shadow: 0 10px 30px rgba(251, 191, 36, 0.3);
            margin: 0 auto 20px;
        }
        .stat-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
        }
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Ic√¥nes SVG
        const Icon = ({d, className = "w-6 h-6"}) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d={d} /></svg>;
        const Users = ({className}) => <Icon className={className} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />;
        const Target = ({className}) => <svg className={className || "w-6 h-6"} fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>;
        const Zap = ({className}) => <Icon className={className} d="M13 10V3L4 14h7v7l9-11h-7z" />;
        const MapPin = ({className}) => <Icon className={className} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />;
        const Clock = ({className}) => <svg className={className || "w-6 h-6"} fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>;
        const Trophy = ({className}) => <Icon className={className} d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />;
        const RotateCcw = ({className}) => <Icon className={className} d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6" />;
        const ChevronRight = ({className}) => <Icon className={className} d="M9 5l7 7-7 7" />;
        const Trash2 = ({className}) => <Icon className={className} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />;
        const AlertCircle = ({className}) => <svg className={className || "w-6 h-6"} fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 8v4m0 4h.01"/></svg>;
        const BookOpen = ({className}) => <Icon className={className} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />;
        const Award = ({className}) => <svg className={className || "w-6 h-6"} fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="8" r="7"/><path d="M8.21 13.89L7 23l5-3 5 3-1.21-9.12"/></svg>;
        const TrendingUp = ({className}) => <Icon className={className} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />;
        const Edit = ({className}) => <Icon className={className} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />;
        const Save = ({className}) => <Icon className={className} d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4" />;
        const BarChart = ({className}) => <Icon className={className} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />;

        function BadmintonTracker() {
          const [config, setConfig] = useState({classe: '', nombreJoueurs: 0, joueurs: [], typeMatch: '', mortSubite: false, objetEnseignement: '', pointsDoubles: false});
          const [poule, setPoule] = useState([]);
          const [matchEnCours, setMatchEnCours] = useState(null);
          const [historiquePoints, setHistoriquePoints] = useState([]);
          const [timer, setTimer] = useState(180);
          const [timerActif, setTimerActif] = useState(false);
          const [phase, setPhase] = useState('classe');
          const [donnees, setDonnees] = useState({});
          const [classes, setClasses] = useState({});
          const [showDeleteModal, setShowDeleteModal] = useState(false);
          const [showTerrain, setShowTerrain] = useState(false);
          const [matchsTermines, setMatchsTermines] = useState([]);
          const [showEditMatch, setShowEditMatch] = useState(null);
          const [seances, setSeances] = useState({});
          const [currentSeance, setCurrentSeance] = useState(1);

          // Sauvegarde automatique toutes les 5 secondes
          useEffect(() => {
            const interval = setInterval(() => {
              sauvegarderDonnees();
            }, 5000);
            return () => clearInterval(interval);
          }, [donnees, matchsTermines, config, seances]);

          const sauvegarderDonnees = () => {
            try {
              const dataToSave = {
                classes,
                config,
                donnees,
                matchsTermines,
                phase,
                poule,
                seances,
                currentSeance,
                timestamp: new Date().toISOString()
              };
              localStorage.setItem('badminton-data', JSON.stringify(dataToSave));
              localStorage.setItem('badminton-backup', JSON.stringify(dataToSave)); // Backup
            } catch (e) {
              console.error('Erreur sauvegarde:', e);
            }
          };

          // Chargement initial
          useEffect(() => {
            const saved = localStorage.getItem('badminton-data');
            if (saved) {
              try {
                const data = JSON.parse(saved);
                setClasses(data.classes || {});
                setConfig(data.config || config);
                setDonnees(data.donnees || {});
                setMatchsTermines(data.matchsTermines || []);
                setPhase(data.phase || 'classe');
                setPoule(data.poule || []);
                setSeances(data.seances || {});
                setCurrentSeance(data.currentSeance || 1);
              } catch(e) {
                console.error('Erreur chargement:', e);
              }
            }
          }, []);

          // Timer
          useEffect(() => {
            let interval;
            if (timerActif && timer > 0) {
              interval = setInterval(() => {
                setTimer(prev => {
                  if (prev <= 1) { 
                    setTimerActif(false); 
                    alert('Temps √©coul√© !'); 
                    return 0; 
                  }
                  return prev - 1;
                });
              }, 1000);
            }
            return () => clearInterval(interval);
          }, [timerActif, timer]);

          const formatTimer = (s) => `${Math.floor(s/60)}:${(s%60).toString().padStart(2,'0')}`;

          // G√©n√©ration optimale de l'ordre des matchs (round-robin)
          const genererOrdreMatchs = (joueurs) => {
            const n = joueurs.length;
            const matchs = [];
            
            if (n === 2) {
              matchs.push([joueurs[0], joueurs[1]]);
            } else {
              // Algorithme round-robin pour minimiser les temps d'attente
              const rounds = n % 2 === 0 ? n - 1 : n;
              const playersPerRound = n % 2 === 0 ? n : n + 1;
              
              let players = [...joueurs];
              if (n % 2 !== 0) {
                players.push(null); // Joueur fant√¥me pour nombre impair
              }

              for (let round = 0; round < rounds; round++) {
                for (let i = 0; i < playersPerRound / 2; i++) {
                  const j1 = players[i];
                  const j2 = players[playersPerRound - 1 - i];
                  if (j1 && j2) {
                    matchs.push([j1, j2]);
                  }
                }
                // Rotation (le premier reste fixe)
                players = [players[0], players[playersPerRound - 1], ...players.slice(1, playersPerRound - 1)];
              }
            }
            return matchs;
          };

          const ajouterJoueur = () => {
            setConfig(prev => ({...prev, joueurs: [...prev.joueurs, { nom: `Joueur${prev.joueurs.length + 1}`, prenom: '' }]}));
          };

          const modifierJoueur = (index, field, value) => {
            const nouveaux = [...config.joueurs];
            nouveaux[index][field] = value;
            setConfig({...config, joueurs: nouveaux});
          };

          const demarrerPoule = () => {
            const nouvelleDonnees = {};
            config.joueurs.forEach(j => {
              nouvelleDonnees[`${j.prenom}_${j.nom}`] = {
                nom: j.nom, 
                prenom: j.prenom, 
                zonesDangereuses: 0, 
                smashAnnonces: 0, 
                zonesLibres: 0,
                pointsDoubles: 0, 
                matchsJoues: 0, 
                matchsGagnes: 0, 
                pointsMarques: 0, 
                pointsEncaisses: 0,
                defaitesMortSubite: 0, 
                victoires: [], 
                pointsTerrain: []
              };
            });
            setDonnees(nouvelleDonnees);
            setPoule(config.joueurs);
            setMatchsTermines([]);
            
            // Initialiser la s√©ance
            if (!seances[config.classe]) {
              seances[config.classe] = {};
            }
            if (!seances[config.classe][currentSeance]) {
              seances[config.classe][currentSeance] = {
                date: new Date().toISOString(),
                donnees: nouvelleDonnees
              };
            }
            
            setClasses(prev => ({...prev, [config.classe]: nouvelleDonnees}));
            setPhase('selection');
          };

          const getMatchKey = (j1, j2) => {
            const key1 = `${j1.prenom}_${j1.nom}`;
            const key2 = `${j2.prenom}_${j2.nom}`;
            return [key1, key2].sort().join('-vs-');
          };

          const isMatchTermine = (j1, j2) => {
            const key = getMatchKey(j1, j2);
            return matchsTermines.some(m => m.key === key);
          };

          const demarrerMatch = (j1, j2) => {
            if (isMatchTermine(j1, j2)) {
              alert('Ce match a d√©j√† √©t√© jou√©. Utilisez "Modifier" pour corriger le r√©sultat.');
              return;
            }

            const pointsMax = config.typeMatch === '11pts' ? 11 : config.typeMatch === '15pts' ? 15 : 999;
            setMatchEnCours({
              joueur1: `${j1.prenom}_${j1.nom}`, 
              joueur2: `${j2.prenom}_${j2.nom}`, 
              prenomJ1: j1.prenom, 
              nomJ1: j1.nom,
              prenomJ2: j2.prenom, 
              nomJ2: j2.nom,
              scoreJ1: 0, 
              scoreJ2: 0, 
              pointsDoublesJ1: 0, 
              pointsDoublesJ2: 0,
              statsJ1: { zonesDangereuses: 0, smashAnnonces: 0, zonesLibres: 0 },
              statsJ2: { zonesDangereuses: 0, smashAnnonces: 0, zonesLibres: 0 },
              terrainJ1: [], 
              terrainJ2: [], 
              pointsMax, 
              changementCote: Math.floor(pointsMax / 2), 
              coteChange: false
            });
            setHistoriquePoints([]);
            if (config.typeMatch === '3min') { 
              setTimer(180); 
              setTimerActif(true); 
            }
            setPhase('jeu');
          };

          const ajouterPointAvecZone = (joueur, type, zone) => {
            setMatchEnCours(prev => {
              const nouveau = {...prev};
              const isDouble = type !== 'normal';
              
              setHistoriquePoints(hist => [...hist, {joueur, type, zone, etat: JSON.parse(JSON.stringify(prev))}]);

              if (joueur === 'j1') {
                nouveau.scoreJ1++;
                if (isDouble && config.pointsDoubles) nouveau.scoreJ1++;
                if (isDouble) nouveau.pointsDoublesJ1++;
                if (type === 'zoneDangereuse') nouveau.statsJ1.zonesDangereuses++;
                else if (type === 'smashAnnonce') nouveau.statsJ1.smashAnnonces++;
                else if (type === 'zoneLibre') nouveau.statsJ1.zonesLibres++;
                if (zone) nouveau.terrainJ1.push(zone);
              } else {
                nouveau.scoreJ2++;
                if (isDouble && config.pointsDoubles) nouveau.scoreJ2++;
                if (isDouble) nouveau.pointsDoublesJ2++;
                if (type === 'zoneDangereuse') nouveau.statsJ2.zonesDangereuses++;
                else if (type === 'smashAnnonce') nouveau.statsJ2.smashAnnonces++;
                else if (type === 'zoneLibre') nouveau.statsJ2.zonesLibres++;
                if (zone) nouveau.terrainJ2.push(zone);
              }

              if (config.mortSubite) {
                if (nouveau.pointsDoublesJ2 >= 3) { 
                  setTimeout(() => terminerMatch(true, 'j1'), 100); 
                  return nouveau; 
                }
                if (nouveau.pointsDoublesJ1 >= 3) { 
                  setTimeout(() => terminerMatch(true, 'j2'), 100); 
                  return nouveau; 
                }
              }

              if (!nouveau.coteChange && config.typeMatch !== '3min') {
                const total = nouveau.scoreJ1 + nouveau.scoreJ2;
                if (total >= nouveau.changementCote) {
                  nouveau.coteChange = true;
                  setTimeout(() => alert('üîÑ Changement de c√¥t√© !'), 100);
                }
              }

              if (config.typeMatch !== '3min') {
                if (nouveau.scoreJ1 >= nouveau.pointsMax || nouveau.scoreJ2 >= nouveau.pointsMax) {
                  setTimeout(() => terminerMatch(), 100);
                }
              }

              return nouveau;
            });
          };

          const ajouterPoint = (joueur, type) => ajouterPointAvecZone(joueur, type, null);

          const annulerDernierPoint = () => {
            if (historiquePoints.length === 0) { 
              alert('Aucun point √† annuler'); 
              return; 
            }
            const dernierPoint = historiquePoints[historiquePoints.length - 1];
            setMatchEnCours(dernierPoint.etat);
            setHistoriquePoints(hist => hist.slice(0, -1));
          };

          const getIndiceReussite = (bonus, victoire) => {
            if (!victoire) return { texte: 'D√©faite', couleur: 'text-gray-600', icon: '‚ùå' };
            if (bonus >= 4) return { texte: 'Excellent', couleur: 'text-purple-600', icon: 'üèÜ' };
            if (bonus >= 3) return { texte: 'Tr√®s bien', couleur: 'text-green-600', icon: '‚≠ê' };
            if (bonus >= 2) return { texte: 'Bien', couleur: 'text-blue-600', icon: '‚úì' };
            if (bonus >= 1) return { texte: 'Assez bien', couleur: 'text-yellow-600', icon: '‚óã' };
            return { texte: 'Victoire simple', couleur: 'text-gray-600', icon: '‚Ä¢' };
          };

          const terminerMatch = (mortSubite = false, gagnant = null) => {
            if (!matchEnCours) return;

            const {joueur1, joueur2, prenomJ1, nomJ1, prenomJ2, nomJ2, scoreJ1, scoreJ2, statsJ1, statsJ2, pointsDoublesJ1, pointsDoublesJ2, terrainJ1, terrainJ2} = matchEnCours;
            const victoireJ1 = mortSubite ? gagnant === 'j1' : scoreJ1 > scoreJ2;
            const victoireJ2 = mortSubite ? gagnant === 'j2' : scoreJ2 > scoreJ1;

            // Enregistrer le match termin√©
            const matchKey = getMatchKey({prenom: prenomJ1, nom: nomJ1}, {prenom: prenomJ2, nom: nomJ2});
            setMatchsTermines(prev => [...prev, {
              key: matchKey,
              j1: joueur1,
              j2: joueur2,
              scoreJ1,
              scoreJ2,
              statsJ1,
              statsJ2,
              pointsDoublesJ1,
              pointsDoublesJ2,
              victoireJ1,
              mortSubite,
              date: new Date().toISOString()
            }]);

            setDonnees(prev => {
              const nouveau = {...prev};
              
              // Mise √† jour joueur 1
              nouveau[joueur1].matchsJoues++;
              nouveau[joueur1].pointsMarques += scoreJ1;
              nouveau[joueur1].pointsEncaisses += scoreJ2;
              nouveau[joueur1].zonesDangereuses += statsJ1.zonesDangereuses;
              nouveau[joueur1].smashAnnonces += statsJ1.smashAnnonces;
              nouveau[joueur1].zonesLibres += statsJ1.zonesLibres;
              nouveau[joueur1].pointsDoubles += pointsDoublesJ1;
              nouveau[joueur1].pointsTerrain.push(...terrainJ1);

              if (victoireJ1) {
                nouveau[joueur1].matchsGagnes++;
                nouveau[joueur1].victoires.push({
                  adversaire: `${prenomJ2} ${nomJ2}`,
                  score: `${scoreJ1}-${scoreJ2}`,
                  bonus: pointsDoublesJ1,
                  indice: getIndiceReussite(pointsDoublesJ1, true)
                });
              } else if (mortSubite) {
                nouveau[joueur1].defaitesMortSubite++;
              }

              // Mise √† jour joueur 2
              nouveau[joueur2].matchsJoues++;
              nouveau[joueur2].pointsMarques += scoreJ2;
              nouveau[joueur2].pointsEncaisses += scoreJ1;
              nouveau[joueur2].zonesDangereuses += statsJ2.zonesDangereuses;
              nouveau[joueur2].smashAnnonces += statsJ2.smashAnnonces;
              nouveau[joueur2].zonesLibres += statsJ2.zonesLibres;
              nouveau[joueur2].pointsDoubles += pointsDoublesJ2;
              nouveau[joueur2].pointsTerrain.push(...terrainJ2);

              if (victoireJ2) {
                nouveau[joueur2].matchsGagnes++;
                nouveau[joueur2].victoires.push({
                  adversaire: `${prenomJ1} ${nomJ1}`,
                  score: `${scoreJ2}-${scoreJ1}`,
                  bonus: pointsDoublesJ2,
                  indice: getIndiceReussite(pointsDoublesJ2, true)
                });
              } else if (mortSubite) {
                nouveau[joueur2].defaitesMortSubite++;
              }

              return nouveau;
            });

            // Sauvegarder dans la s√©ance
            if (seances[config.classe] && seances[config.classe][currentSeance]) {
              seances[config.classe][currentSeance].donnees = donnees;
            }

            setClasses(prev => ({...prev, [config.classe]: donnees}));
            setTimerActif(false);
            setMatchEnCours(null);
            setHistoriquePoints([]);
            setPhase('selection');
            sauvegarderDonnees();
          };

          const modifierMatch = (match) => {
            setShowEditMatch(match);
          };

          const sauvegarderModificationMatch = (newScoreJ1, newScoreJ2) => {
            // Logique de modification du match
            setDonnees(prev => {
              const nouveau = {...prev};
              const match = showEditMatch;
              
              // Annuler les anciens scores
              nouveau[match.j1].pointsMarques -= match.scoreJ1;
              nouveau[match.j1].pointsEncaisses -= match.scoreJ2;
              nouveau[match.j2].pointsMarques -= match.scoreJ2;
              nouveau[match.j2].pointsEncaisses -= match.scoreJ1;

              // Ajouter les nouveaux scores
              nouveau[match.j1].pointsMarques += newScoreJ1;
              nouveau[match.j1].pointsEncaisses += newScoreJ2;
              nouveau[match.j2].pointsMarques += newScoreJ2;
              nouveau[match.j2].pointsEncaisses += newScoreJ1;

              // Recalculer les victoires
              const nouvelleVictoireJ1 = newScoreJ1 > newScoreJ2;
              const ancienneVictoireJ1 = match.victoireJ1;

              if (nouvelleVictoireJ1 !== ancienneVictoireJ1) {
                if (nouvelleVictoireJ1) {
                  nouveau[match.j1].matchsGagnes++;
                  nouveau[match.j2].matchsGagnes--;
                } else {
                  nouveau[match.j1].matchsGagnes--;
                  nouveau[match.j2].matchsGagnes++;
                }
              }

              return nouveau;
            });

            // Mettre √† jour l'historique des matchs
            setMatchsTermines(prev => prev.map(m => 
              m.key === showEditMatch.key 
                ? {...m, scoreJ1: newScoreJ1, scoreJ2: newScoreJ2, victoireJ1: newScoreJ1 > newScoreJ2}
                : m
            ));

            setShowEditMatch(null);
            sauvegarderDonnees();
          };

          const TerrainBadminton = ({ points, joueurNom }) => {
            const zones = [
              { id: 1, x: 10, y: 10, w: 35, h: 35, label: 'Avant\nGauche' },
              { id: 2, x: 55, y: 10, w: 35, h: 35, label: 'Avant\nDroite' },
              { id: 3, x: 10, y: 55, w: 35, h: 35, label: 'Arri√®re\nGauche' },
              { id: 4, x: 55, y: 55, w: 35, h: 35, label: 'Arri√®re\nDroite' }
            ];

            const countZone = (zoneId) => points.filter(p => p === zoneId).length;

            return (
              <div className="bg-gradient-to-br from-green-700 to-green-600 rounded-lg p-4 border-4 border-white shadow-lg">
                <h4 className="text-center font-bold mb-2 text-sm text-white">{joueurNom}</h4>
                <svg viewBox="0 0 100 100" className="w-full max-w-xs mx-auto bg-green-800 rounded">
                  <rect x="5" y="5" width="90" height="90" fill="#1a5e1a" stroke="#fff" strokeWidth="2"/>
                  <line x1="50" y1="5" x2="50" y2="95" stroke="#fff" strokeWidth="1.5"/>
                  <line x1="5" y1="50" x2="95" y2="50" stroke="#fff" strokeWidth="2"/>
                  <line x1="5" y1="30" x2="95" y2="30" stroke="#fff" strokeWidth="1" strokeDasharray="2,2"/>
                  <line x1="5" y1="70" x2="95" y2="70" stroke="#fff" strokeWidth="1" strokeDasharray="2,2"/>
                  <rect x="48" y="5" width="4" height="90" fill="#333" opacity="0.3"/>
                  
                  {zones.map(zone => {
                    const count = countZone(zone.id);
                    return (
                      <g key={zone.id}>
                        <rect x={zone.x} y={zone.y} width={zone.w} height={zone.h} 
                          fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.3)" strokeWidth="0.5"/>
                        {count > 0 && (
                          <>
                            <circle cx={zone.x + zone.w/2} cy={zone.y + zone.h/2} r="14" 
                              fill="#FFD700" stroke="#FFA500" strokeWidth="2"/>
                            <text x={zone.x + zone.w/2} y={zone.y + zone.h/2 - 2} 
                              textAnchor="middle" fontSize="10" fontWeight="bold" fill="#000">üè∏</text>
                            <text x={zone.x + zone.w/2} y={zone.y + zone.h/2 + 10} 
                              textAnchor="middle" fontSize="12" fontWeight="bold" fill="#000">{count}</text>
                          </>
                        )}
                      </g>
                    );
                  })}
                </svg>
                <div className="grid grid-cols-2 gap-1 mt-3 text-xs">
                  {zones.map(zone => (
                    <div key={zone.id} className="bg-white bg-opacity-20 p-2 rounded text-white font-semibold">
                      <span className="block text-center whitespace-pre-line">{zone.label}</span>
                      <span className="block text-center text-lg">{countZone(zone.id)}</span>
                    </div>
                  ))}
                </div>
              </div>
            );
          };

          // PAGE D'ACCUEIL
          if (phase === 'classe') {
            return (
              <div className="min-h-screen p-4">
                <div className="max-w-2xl mx-auto animate-slide-in">
                  <div className="glass rounded-3xl shadow-2xl p-8">
                    <div className="text-center mb-8">
                      <div className="badminton-icon">üè∏</div>
                      <h1 className="text-5xl font-extrabold bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent mb-2">
                        Badminton Pro
                      </h1>
                      <p className="text-gray-600 font-medium">Application EPS - Recueil de donn√©es</p>
                    </div>
                    
                    <div className="mb-6">
                      <label className="block text-sm font-bold text-gray-700 mb-3">üìö Nom de la classe</label>
                      <input 
                        type="text" 
                        value={config.classe} 
                        onChange={(e) => setConfig({...config, classe: e.target.value})}
                        className="w-full px-5 py-4 border-2 border-emerald-300 rounded-xl focus:border-emerald-500 focus:outline-none text-lg font-medium shadow-sm"
                        placeholder="Ex: 3√®me A, 2nde 5..." 
                      />
                    </div>

                    {Object.keys(classes).length > 0 && (
                      <div className="mb-6">
                        <div className="flex justify-between items-center mb-3">
                          <p className="text-sm font-bold text-gray-700">üìÇ Classes existantes</p>
                          <button 
                            onClick={() => setShowDeleteModal(true)} 
                            className="text-red-600 text-sm flex items-center gap-1 font-medium hover:text-red-700"
                          >
                            <Trash2 className="w-4 h-4" /> G√©rer
                          </button>
                        </div>
                        <div className="space-y-2">
                          {Object.keys(classes).map(cls => (
                            <button 
                              key={cls} 
                              onClick={() => { 
                                setConfig({...config, classe: cls}); 
                                setDonnees(classes[cls]); 
                              }}
                              className="w-full text-left px-5 py-4 bg-gradient-to-r from-emerald-50 to-teal-50 hover:from-emerald-100 hover:to-teal-100 rounded-xl border-2 border-emerald-200 transition-all shadow-sm"
                            >
                              <span className="font-bold text-emerald-700">{cls}</span>
                              <span className="text-sm text-gray-600 ml-2">
                                ({Object.keys(classes[cls]).length} √©l√®ves)
                              </span>
                            </button>
                          ))}
                        </div>
                      </div>
                    )}

                    <button 
                      onClick={() => setPhase('config')} 
                      disabled={!config.classe.trim()}
                      className="w-full bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-4 rounded-xl font-bold text-lg hover:from-emerald-700 hover:to-teal-700 disabled:from-gray-300 disabled:to-gray-400 transition shadow-lg disabled:shadow-none"
                    >
                      Continuer ‚Üí
                    </button>
                  </div>
                </div>

                {showDeleteModal && (
                  <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                    <div className="glass rounded-2xl p-6 max-w-md w-full">
                      <h3 className="text-xl font-bold mb-4">üóëÔ∏è Supprimer des classes</h3>
                      <div className="space-y-2 mb-6">
                        {Object.keys(classes).length === 0 ? (
                          <p className="text-gray-500 text-center py-4">Aucune classe</p>
                        ) : Object.keys(classes).map(cls => (
                          <div key={cls} className="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                            <span className="font-medium">{cls}</span>
                            <button 
                              onClick={() => {
                                if (confirm(`Supprimer "${cls}" ?`)) {
                                  const updated = {...classes};
                                  delete updated[cls];
                                  setClasses(updated);
                                  if (Object.keys(updated).length === 0) {
                                    localStorage.removeItem('badminton-data');
                                    setShowDeleteModal(false);
                                  }
                                  sauvegarderDonnees();
                                  alert(`Classe "${cls}" supprim√©e`);
                                }
                              }} 
                              className="text-red-600 p-2 hover:bg-red-50 rounded transition"
                            >
                              <Trash2 className="w-5 h-5" />
                            </button>
                          </div>
                        ))}
                      </div>
                      <button 
                        onClick={() => setShowDeleteModal(false)} 
                        className="w-full bg-gray-600 text-white py-3 rounded-lg font-bold hover:bg-gray-700 transition"
                      >
                        Fermer
                      </button>
                    </div>
                  </div>
                )}
              </div>
            );
          }

          // CONFIGURATION DES JOUEURS
          if (phase === 'config') {
            return (
              <div className="min-h-screen p-4">
                <div className="max-w-2xl mx-auto animate-slide-in">
                  <div className="glass rounded-3xl shadow-2xl p-8">
                    <div className="text-center mb-8">
                      <Users className="w-12 h-12 text-emerald-600 mx-auto mb-4" />
                      <h1 className="text-3xl font-bold text-gray-800 mb-2">{config.classe}</h1>
                      <p className="text-gray-600 font-medium">Configuration de la poule</p>
                    </div>

                    {config.nombreJoueurs === 0 ? (
                      <div>
                        <p className="text-center font-bold mb-6 text-lg">Combien d'√©l√®ves dans la poule ?</p>
                        <div className="grid grid-cols-4 gap-3">
                          {[2, 3, 4, 5].map(nb => (
                            <button 
                              key={nb} 
                              onClick={() => {
                                setConfig({...config, nombreJoueurs: nb, joueurs: []});
                                for (let i = 0; i < nb; i++) setTimeout(() => ajouterJoueur(), i * 50);
                              }}
                              className="bg-gradient-to-br from-emerald-500 to-teal-500 text-white py-8 rounded-2xl font-bold text-3xl hover:from-emerald-600 hover:to-teal-600 shadow-lg hover:shadow-xl transition transform hover:scale-105"
                            >
                              {nb}
                            </button>
                          ))}
                        </div>
                      </div>
                    ) : (
                      <div>
                        <p className="text-center font-bold mb-4 text-lg">
                          √âl√®ves ({config.joueurs.length}/{config.nombreJoueurs})
                        </p>
                        <div className="space-y-3 mb-6">
                          {config.joueurs.map((joueur, index) => (
                            <div key={index} className="grid grid-cols-2 gap-2">
                              <input 
                                type="text" 
                                value={joueur.prenom} 
                                onChange={(e) => modifierJoueur(index, 'prenom', e.target.value)}
                                className="px-4 py-3 border-2 border-emerald-300 rounded-xl focus:border-emerald-500 focus:outline-none font-medium"
                                placeholder="Pr√©nom" 
                              />
                              <input 
                                type="text" 
                                value={joueur.nom} 
                                onChange={(e) => modifierJoueur(index, 'nom', e.target.value)}
                                className="px-4 py-3 border-2 border-emerald-300 rounded-xl focus:border-emerald-500 focus:outline-none font-medium"
                                placeholder="Nom" 
                              />
                            </div>
                          ))}
                        </div>

                        <div className="flex gap-3">
                          <button 
                            onClick={() => {
                              setConfig({...config, nombreJoueurs: 0, joueurs: []});
                            }} 
                            className="flex-1 bg-gray-500 text-white py-4 rounded-xl font-bold hover:bg-gray-600 transition"
                          >
                            ‚Üê Retour
                          </button>
                          <button 
                            onClick={() => setPhase('objetEnseignement')} 
                            disabled={config.joueurs.some(j => !j.nom.trim() || !j.prenom.trim())}
                            className="flex-1 bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-4 rounded-xl font-bold hover:from-emerald-700 hover:to-teal-700 disabled:from-gray-300 disabled:to-gray-400 transition"
                          >
                            Suivant ‚Üí
                          </button>
                        </div>
                      </div>
                    )}
                  </div>
                </div>
              </div>
            );
          }

          // OBJET D'ENSEIGNEMENT
          if (phase === 'objetEnseignement') {
            return (
              <div className="min-h-screen p-4">
                <div className="max-w-2xl mx-auto animate-slide-in">
                  <div className="glass rounded-3xl shadow-2xl p-8">
                    <h2 className="text-3xl font-bold text-center mb-6 bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent">
                      üéØ Objet d'enseignement
                    </h2>
                    
                    <div className="space-y-3 mb-6">
                      <button 
                        onClick={() => setConfig({...config, objetEnseignement: 'smash'})}
                        className={`w-full p-5 rounded-2xl border-2 transition shadow-md hover:shadow-lg ${
                          config.objetEnseignement === 'smash' 
                            ? 'border-purple-600 bg-gradient-to-r from-purple-50 to-pink-50' 
                            : 'border-gray-300 bg-white'
                        }`}
                      >
                        <div className="flex items-center gap-4">
                          <Zap className="w-8 h-8 text-purple-600" />
                          <div className="text-left flex-1">
                            <div className="font-bold text-lg">‚ö° Travail du smash annonc√©</div>
                            <div className="text-sm text-gray-600">Crier "smash" avant de frapper</div>
                          </div>
                        </div>
                      </button>

                      <button 
                        onClick={() => setConfig({...config, objetEnseignement: 'zones'})}
                        className={`w-full p-5 rounded-2xl border-2 transition shadow-md hover:shadow-lg ${
                          config.objetEnseignement === 'zones' 
                            ? 'border-orange-600 bg-gradient-to-r from-orange-50 to-red-50' 
                            : 'border-gray-300 bg-white'
                        }`}
                      >
                        <div className="flex items-center gap-4">
                          <Target className="w-8 h-8 text-orange-600" />
                          <div className="text-left flex-1">
                            <div className="font-bold text-lg">üéØ Viser les zones dangereuses</div>
                            <div className="text-sm text-gray-600">Zones avant et arri√®re du terrain</div>
                          </div>
                        </div>
                      </button>

                      <button 
                        onClick={() => setConfig({...config, objetEnseignement: 'espaces'})}
                        className={`w-full p-5 rounded-2xl border-2 transition shadow-md hover:shadow-lg ${
                          config.objetEnseignement === 'espaces' 
                            ? 'border-green-600 bg-gradient-to-r from-green-50 to-teal-50' 
                            : 'border-gray-300 bg-white'
                        }`}
                      >
                        <div className="flex items-center gap-4">
                          <MapPin className="w-8 h-8 text-green-600" />
                          <div className="text-left flex-1">
                            <div className="font-bold text-lg">üìç Viser les espaces libres</div>
                            <div className="text-sm text-gray-600">O√π l'adversaire n'est pas</div>
                          </div>
                        </div>
                      </button>
                    </div>

                    <div className="flex gap-3">
                      <button 
                        onClick={() => setPhase('config')} 
                        className="flex-1 bg-gray-500 text-white py-4 rounded-xl font-bold hover:bg-gray-600 transition"
                      >
                        ‚Üê Retour
                      </button>
                      <button 
                        onClick={() => setPhase('typeMatch')} 
                        disabled={!config.objetEnseignement}
                        className="flex-1 bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-4 rounded-xl font-bold hover:from-emerald-700 hover:to-teal-700 disabled:from-gray-300 disabled:to-gray-400 transition"
                      >
                        Suivant ‚Üí
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          // TYPE DE MATCH
          if (phase === 'typeMatch') {
            return (
              <div className="min-h-screen p-4">
                <div className="max-w-2xl mx-auto animate-slide-in">
                  <div className="glass rounded-3xl shadow-2xl p-8">
                    <h2 className="text-3xl font-bold text-center mb-6 bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent">
                      ‚öôÔ∏è Configuration du match
                    </h2>

                    <div className="mb-6">
                      <h3 className="font-bold text-gray-700 mb-3 text-lg">Type de match</h3>
                      <div className="space-y-3">
                        {[
                          {value: '3min', icon: Clock, title: 'Match en 3 minutes', desc: 'Dur√©e limit√©e'},
                          {value: '11pts', icon: Target, title: 'Match en 11 points', desc: 'Changement √† 6 points'},
                          {value: '15pts', icon: Target, title: 'Match en 15 points', desc: 'Changement √† 8 points'}
                        ].map(({value, icon: Icon, title, desc}) => (
                          <button 
                            key={value}
                            onClick={() => setConfig({...config, typeMatch: value})}
                            className={`w-full p-4 rounded-xl border-2 transition shadow-md hover:shadow-lg ${
                              config.typeMatch === value 
                                ? 'border-emerald-600 bg-gradient-to-r from-emerald-50 to-teal-50' 
                                : 'border-gray-300 bg-white'
                            }`}
                          >
                            <div className="flex items-center gap-3">
                              <Icon className="w-7 h-7 text-emerald-600" />
                              <div className="text-left">
                                <div className="font-bold">{title}</div>
                                <div className="text-sm text-gray-600">{desc}</div>
                              </div>
                            </div>
                          </button>
                        ))}
                      </div>
                    </div>

                    <div className="mb-6">
                      <h3 className="font-bold text-gray-700 mb-3 text-lg">Options de jeu</h3>
                      <div className="space-y-3">
                        <label className="flex items-center p-4 rounded-xl border-2 cursor-pointer transition hover:bg-blue-50 border-gray-300 shadow-sm">
                          <input 
                            type="checkbox" 
                            checked={config.pointsDoubles} 
                            onChange={(e) => setConfig({...config, pointsDoubles: e.target.checked})}
                            className="w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 cursor-pointer" 
                          />
                          <div className="ml-3 flex items-center gap-3 flex-1">
                            <Award className="w-6 h-6 text-blue-600" />
                            <div>
                              <div className="font-bold text-gray-800">üèÜ Points doubles</div>
                              <div className="text-sm text-gray-600">
                                {config.pointsDoubles ? "‚úì Les actions de l'objet valent 2 points" : "Toutes les actions valent 1 point"}
                              </div>
                            </div>
                          </div>
                        </label>

                        <label className="flex items-center p-4 rounded-xl border-2 cursor-pointer transition hover:bg-red-50 border-gray-300 shadow-sm">
                          <input 
                            type="checkbox" 
                            checked={config.mortSubite} 
                            onChange={(e) => setConfig({...config, mortSubite: e.target.checked})}
                            className="w-5 h-5 text-red-600 rounded focus:ring-2 focus:ring-red-500 cursor-pointer" 
                          />
                          <div className="ml-3 flex items-center gap-3 flex-1">
                            <AlertCircle className="w-6 h-6 text-red-600" />
                            <div>
                              <div className="font-bold text-gray-800">‚ö†Ô∏è Mort subite</div>
                              <div className="text-sm text-gray-600">D√©faite apr√®s 3 points doubles encaiss√©s</div>
                            </div>
                          </div>
                        </label>
                      </div>
                    </div>

                    <div className="flex gap-3">
                      <button 
                        onClick={() => setPhase('objetEnseignement')} 
                        className="flex-1 bg-gray-500 text-white py-4 rounded-xl font-bold hover:bg-gray-600 transition"
                      >
                        ‚Üê Retour
                      </button>
                      <button 
                        onClick={demarrerPoule} 
                        disabled={!config.typeMatch}
                        className="flex-1 bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-4 rounded-xl font-bold hover:from-emerald-700 hover:to-teal-700 disabled:from-gray-300 disabled:to-gray-400 transition"
                      >
                        üöÄ D√©marrer
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          // S√âLECTION DES MATCHS
          if (phase === 'selection') {
            const matchsOrdonnes = genererOrdreMatchs(poule);

            return (
              <div className="min-h-screen p-4">
                <div className="max-w-4xl mx-auto animate-slide-in">
                  <div className="glass rounded-3xl shadow-2xl p-6 mb-6">
                    <div className="flex justify-between items-center mb-4">
                      <div>
                        <h2 className="text-2xl font-bold text-emerald-700">{config.classe}</h2>
                        <p className="text-sm text-gray-600">
                          S√©ance #{currentSeance}
                        </p>
                      </div>
                      <div className="text-right text-sm text-gray-600">
                        {config.objetEnseignement === 'smash' && '‚ö° Smash'}
                        {config.objetEnseignement === 'zones' && 'üéØ Zones'}
                        {config.objetEnseignement === 'espaces' && 'üìç Espaces'}
                        {' | '}{config.pointsDoubles ? '√ó2 pts' : '√ó1 pt'}{' | '}
                        {config.typeMatch === '3min' ? '‚è±Ô∏è 3min' : config.typeMatch === '11pts' ? '11pts' : '15pts'}
                        {config.mortSubite && ' ‚ö†Ô∏è'}
                      </div>
                    </div>

                    <div className="mb-4 flex items-center justify-between">
                      <h3 className="font-bold text-lg">üìã Ordre des matchs</h3>
                      <div className="text-sm">
                        <span className="text-green-600 font-bold">{matchsTermines.length}</span>
                        <span className="text-gray-600"> / {matchsOrdonnes.length} matchs</span>
                      </div>
                    </div>

                    <div className="grid gap-3">
                      {matchsOrdonnes.map((match, index) => {
                        const [j1, j2] = match;
                        const estTermine = isMatchTermine(j1, j2);
                        const matchKey = getMatchKey(j1, j2);
                        const matchData = matchsTermines.find(m => m.key === matchKey);

                        return (
                          <div key={index} className={`${estTermine ? 'match-done' : 'match-pending'} text-white p-4 rounded-xl flex items-center justify-between shadow-lg transition-all`}>
                            <div className="flex items-center gap-3">
                              <div className="bg-white text-gray-800 rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm">
                                {index + 1}
                              </div>
                              <span className="font-bold">
                                {j1.prenom} {j1.nom} vs {j2.prenom} {j2.nom}
                              </span>
                            </div>
                            
                            {estTermine ? (
                              <div className="flex items-center gap-3">
                                <span className="font-bold text-lg">
                                  ‚úì {matchData.scoreJ1} - {matchData.scoreJ2}
                                </span>
                                <button
                                  onClick={() => modifierMatch(matchData)}
                                  className="bg-white text-emerald-600 p-2 rounded-lg hover:bg-emerald-50 transition"
                                  title="Modifier le r√©sultat"
                                >
                                  <Edit className="w-5 h-5" />
                                </button>
                              </div>
                            ) : (
                              <button
                                onClick={() => demarrerMatch(j1, j2)}
                                className="bg-white text-blue-600 px-5 py-2 rounded-lg font-bold hover:bg-blue-50 transition flex items-center gap-2"
                              >
                                Jouer <ChevronRight className="w-5 h-5" />
                              </button>
                            )}
                          </div>
                        );
                      })}
                    </div>
                  </div>

                  {/* Classement */}
                  <div className="glass rounded-3xl shadow-2xl p-6 mb-6">
                    <div className="flex justify-between items-center mb-4">
                      <h2 className="text-xl font-bold flex items-center gap-2">
                        <Trophy className="w-6 h-6 text-yellow-500" />Classement
                      </h2>
                      <button 
                        onClick={() => setPhase('stats')} 
                        className="bg-gradient-to-r from-emerald-600 to-teal-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:from-emerald-700 hover:to-teal-700 transition"
                      >
                        üìä Stats d√©taill√©es
                      </button>
                    </div>
                    
                    <div className="space-y-2">
                      {Object.values(donnees)
                        .sort((a, b) => {
                          // Tri par victoires puis par diff√©rence de points
                          if (b.matchsGagnes !== a.matchsGagnes) {
                            return b.matchsGagnes - a.matchsGagnes;
                          }
                          return (b.pointsMarques - b.pointsEncaisses) - (a.pointsMarques - a.pointsEncaisses);
                        })
                        .map((joueur, index) => {
                          const diff = joueur.pointsMarques - joueur.pointsEncaisses;
                          return (
                            <div key={`${joueur.prenom}_${joueur.nom}`} className="flex justify-between items-center bg-gradient-to-r from-gray-50 to-white p-4 rounded-xl border-2 border-gray-200 shadow-sm">
                              <div className="flex items-center gap-4">
                                <div className={`font-bold text-2xl w-8 ${
                                  index === 0 ? 'text-yellow-500' :
                                  index === 1 ? 'text-gray-400' :
                                  index === 2 ? 'text-amber-600' :
                                  'text-gray-500'
                                }`}>
                                  {index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : `${index + 1}.`}
                                </div>
                                <span className="font-bold text-lg">{joueur.prenom} {joueur.nom}</span>
                              </div>
                              <div className="flex gap-4 text-sm items-center">
                                <span className="text-green-600 font-bold text-lg">{joueur.matchsGagnes}V</span>
                                <span className="text-red-600 font-bold">{joueur.matchsJoues - joueur.matchsGagnes}D</span>
                                <span className={`font-bold ${diff > 0 ? 'text-green-600' : diff < 0 ? 'text-red-600' : 'text-gray-600'}`}>
                                  ({diff > 0 ? '+' : ''}{diff})
                                </span>
                                {joueur.victoires.length > 0 && (
                                  <span className={`text-lg ${joueur.victoires[joueur.victoires.length - 1].indice.couleur}`}>
                                    {joueur.victoires[joueur.victoires.length - 1].indice.icon}
                                  </span>
                                )}
                              </div>
                            </div>
                          );
                        })}
                    </div>
                  </div>

                  <div className="flex gap-3">
                    <button 
                      onClick={() => {
                        setCurrentSeance(prev => prev + 1);
                        sauvegarderDonnees();
                        alert('üíæ S√©ance sauvegard√©e ! Vous pourrez reprendre plus tard.');
                      }}
                      className="flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 rounded-xl font-bold flex items-center justify-center gap-2 hover:from-blue-700 hover:to-indigo-700 transition shadow-lg"
                    >
                      <Save className="w-5 h-5" />Sauvegarder & Pause
                    </button>
                    <button 
                      onClick={() => {
                        if (confirm('Nouvelle poule ? (Les donn√©es actuelles seront sauvegard√©es)')) {
                          sauvegarderDonnees();
                          setConfig({ classe: '', nombreJoueurs: 0, joueurs: [], typeMatch: '', mortSubite: false, objetEnseignement: '', pointsDoubles: false });
                          setPoule([]); 
                          setMatchEnCours(null); 
                          setHistoriquePoints([]); 
                          setDonnees({}); 
                          setMatchsTermines([]);
                          setPhase('classe');
                        }
                      }}
                      className="flex-1 bg-gradient-to-r from-red-600 to-pink-600 text-white py-4 rounded-xl font-bold flex items-center justify-center gap-2 hover:from-red-700 hover:to-pink-700 transition shadow-lg"
                    >
                      <RotateCcw className="w-5 h-5" />Nouvelle poule
                    </button>
                  </div>
                </div>

                {/* Modal de modification de match */}
                {showEditMatch && (
                  <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                    <div className="glass rounded-2xl p-6 max-w-md w-full">
                      <h3 className="text-xl font-bold mb-4">‚úèÔ∏è Modifier le r√©sultat</h3>
                      <div className="mb-4">
                        <p className="text-sm text-gray-600 mb-4">Match: {donnees[showEditMatch.j1]?.prenom} {donnees[showEditMatch.j1]?.nom} vs {donnees[showEditMatch.j2]?.prenom} {donnees[showEditMatch.j2]?.nom}</p>
                        <div className="grid grid-cols-2 gap-4">
                          <div>
                            <label className="block text-sm font-bold mb-2">Score {donnees[showEditMatch.j1]?.prenom}</label>
                            <input 
                              type="number" 
                              id="newScoreJ1"
                              defaultValue={showEditMatch.scoreJ1}
                              className="w-full px-4 py-3 border-2 border-emerald-300 rounded-xl focus:border-emerald-500 focus:outline-none text-center text-2xl font-bold"
                            />
                          </div>
                          <div>
                            <label className="block text-sm font-bold mb-2">Score {donnees[showEditMatch.j2]?.prenom}</label>
                            <input 
                              type="number" 
                              id="newScoreJ2"
                              defaultValue={showEditMatch.scoreJ2}
                              className="w-full px-4 py-3 border-2 border-emerald-300 rounded-xl focus:border-emerald-500 focus:outline-none text-center text-2xl font-bold"
                            />
                          </div>
                        </div>
                      </div>
                      <div className="flex gap-3">
                        <button 
                          onClick={() => setShowEditMatch(null)}
                          className="flex-1 bg-gray-500 text-white py-3 rounded-xl font-bold hover:bg-gray-600 transition"
                        >
                          Annuler
                        </button>
                        <button 
                          onClick={() => {
                            const newScoreJ1 = parseInt(document.getElementById('newScoreJ1').value);
                            const newScoreJ2 = parseInt(document.getElementById('newScoreJ2').value);
                            sauvegarderModificationMatch(newScoreJ1, newScoreJ2);
                          }}
                          className="flex-1 bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-3 rounded-xl font-bold hover:from-emerald-700 hover:to-teal-700 transition"
                        >
                          üíæ Sauvegarder
                        </button>
                      </div>
                    </div>
                  </div>
                )}
              </div>
            );
          }

          // PENDANT LE JEU
          if (phase === 'jeu' && matchEnCours) {
            const getButtonForObjet = (joueur) => {
              const pointsText = config.pointsDoubles ? '+2' : '+1';
              if (config.objetEnseignement === 'smash') {
                return (
                  <button 
                    onClick={() => ajouterPoint(joueur, 'smashAnnonce')}
                    className="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-5 rounded-xl font-bold text-lg flex items-center justify-center gap-2 shadow-lg hover:shadow-xl transition transform hover:scale-105"
                  >
                    <Zap className="w-6 h-6" />Smash annonc√© ({pointsText})
                  </button>
                );
              } else if (config.objetEnseignement === 'zones') {
                return (
                  <button 
                    onClick={() => setShowTerrain(joueur)}
                    className="w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-5 rounded-xl font-bold text-lg flex items-center justify-center gap-2 shadow-lg hover:shadow-xl transition transform hover:scale-105"
                  >
                    <Target className="w-6 h-6" />Zone dangereuse ({pointsText})
                  </button>
                );
              } else {
                return (
                  <button 
                    onClick={() => setShowTerrain(joueur)}
                    className="w-full bg-gradient-to-r from-green-500 to-teal-500 text-white py-5 rounded-xl font-bold text-lg flex items-center justify-center gap-2 shadow-lg hover:shadow-xl transition transform hover:scale-105"
                  >
                    <MapPin className="w-6 h-6" />Zone libre ({pointsText})
                  </button>
                );
              }
            };

            return (
              <div className="min-h-screen p-4">
                <div className="max-w-6xl mx-auto animate-slide-in">
                  {/* Timer */}
                  {config.typeMatch === '3min' && (
                    <div className="glass rounded-2xl p-4 mb-6 text-center">
                      <div className={`inline-block px-8 py-3 rounded-full font-bold text-3xl ${timer <= 30 ? 'bg-red-100 text-red-600' : 'bg-emerald-100 text-emerald-600'}`}>
                        ‚è±Ô∏è {formatTimer(timer)}
                      </div>
                      <button 
                        onClick={() => setTimerActif(!timerActif)} 
                        className="block mx-auto mt-3 text-sm text-emerald-600 font-bold hover:text-emerald-700"
                      >
                        {timerActif ? '‚è∏Ô∏è Pause' : '‚ñ∂Ô∏è Reprendre'}
                      </button>
                    </div>
                  )}

                  {/* Mort subite */}
                  {config.mortSubite && (
                    <div className="glass rounded-2xl p-4 mb-6">
                      <h4 className="text-center font-bold mb-3 text-red-600">‚ö†Ô∏è Mort Subite</h4>
                      <div className="flex justify-center gap-12">
                        <div className="text-center">
                          <div className="text-sm text-gray-700 font-bold mb-2">{matchEnCours.prenomJ1}</div>
                          <div className="flex gap-1">
                            {[1, 2, 3].map(i => (
                              <div key={i} className={`w-4 h-4 rounded-full ${i <= matchEnCours.pointsDoublesJ2 ? 'bg-red-500' : 'bg-gray-300'}`} />
                            ))}
                          </div>
                        </div>
                        <div className="text-center">
                          <div className="text-sm text-gray-700 font-bold mb-2">{matchEnCours.prenomJ2}</div>
                          <div className="flex gap-1">
                            {[1, 2, 3].map(i => (
                              <div key={i} className={`w-4 h-4 rounded-full ${i <= matchEnCours.pointsDoublesJ1 ? 'bg-red-500' : 'bg-gray-300'}`} />
                            ))}
                          </div>
                        </div>
                      </div>
                    </div>
                  )}

                  {/* Score */}
                  <div className="glass rounded-3xl shadow-2xl p-8 mb-6">
                    <div className="grid grid-cols-3 gap-6 items-center">
                      <div className="text-center">
                        <h3 className="text-2xl font-bold mb-3 text-blue-600">{matchEnCours.prenomJ1} {matchEnCours.nomJ1}</h3>
                        <div className="text-7xl font-extrabold text-blue-600">{matchEnCours.scoreJ1}</div>
                      </div>
                      <div className="text-center">
                        <div className="text-5xl font-extrabold text-gray-400">VS</div>
                        {matchEnCours.coteChange && (
                          <div className="text-xs text-green-600 font-bold mt-3 bg-green-50 rounded-full px-3 py-1 inline-block">
                            ‚úì C√¥t√© chang√©
                          </div>
                        )}
                      </div>
                      <div className="text-center">
                        <h3 className="text-2xl font-bold mb-3 text-red-600">{matchEnCours.prenomJ2} {matchEnCours.nomJ2}</h3>
                        <div className="text-7xl font-extrabold text-red-600">{matchEnCours.scoreJ2}</div>
                      </div>
                    </div>
                  </div>

                  {/* Boutons de score */}
                  <div className="grid md:grid-cols-2 gap-6 mb-6">
                    {/* Joueur 1 */}
                    <div className="glass rounded-2xl shadow-xl p-6">
                      <h3 className="text-xl font-bold text-blue-600 mb-4 flex items-center gap-2">
                        <div className="w-3 h-3 rounded-full bg-blue-600"></div>
                        {matchEnCours.prenomJ1}
                      </h3>
                      <div className="space-y-3">
                        <button 
                          onClick={() => ajouterPoint('j1', 'normal')} 
                          className="w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-5 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition transform hover:scale-105"
                        >
                          Point normal (+1)
                        </button>
                        {getButtonForObjet('j1')}
                      </div>
                      <div className="mt-4 p-4 bg-blue-50 rounded-xl">
                        <p className="text-sm text-gray-700 font-bold mb-2">üìä Statistiques</p>
                        <div className="grid grid-cols-3 gap-3 text-xs">
                          <div className="text-center p-2 bg-white rounded-lg">
                            <div className="text-2xl font-bold text-orange-600">{matchEnCours.statsJ1.zonesDangereuses}</div>
                            <div className="text-gray-600">ZD</div>
                          </div>
                          <div className="text-center p-2 bg-white rounded-lg">
                            <div className="text-2xl font-bold text-purple-600">{matchEnCours.statsJ1.smashAnnonces}</div>
                            <div className="text-gray-600">SA</div>
                          </div>
                          <div className="text-center p-2 bg-white rounded-lg">
                            <div className="text-2xl font-bold text-green-600">{matchEnCours.statsJ1.zonesLibres}</div>
                            <div className="text-gray-600">ZL</div>
                          </div>
                        </div>
                      </div>
                    </div>

                    {/* Joueur 2 */}
                    <div className="glass rounded-2xl shadow-xl p-6">
                      <h3 className="text-xl font-bold text-red-600 mb-4 flex items-center gap-2">
                        <div className="w-3 h-3 rounded-full bg-red-600"></div>
                        {matchEnCours.prenomJ2}
                      </h3>
                      <div className="space-y-3">
                        <button 
                          onClick={() => ajouterPoint('j2', 'normal')} 
                          className="w-full bg-gradient-to-r from-red-500 to-red-600 text-white py-5 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition transform hover:scale-105"
                        >
                          Point normal (+1)
                        </button>
                        {getButtonForObjet('j2')}
                      </div>
                      <div className="mt-4 p-4 bg-red-50 rounded-xl">
                        <p className="text-sm text-gray-700 font-bold mb-2">üìä Statistiques</p>
                        <div className="grid grid-cols-3 gap-3 text-xs">
                          <div className="text-center p-2 bg-white rounded-lg">
                            <div className="text-2xl font-bold text-orange-600">{matchEnCours.statsJ2.zonesDangereuses}</div>
                            <div className="text-gray-600">ZD</div>
                          </div>
                          <div className="text-center p-2 bg-white rounded-lg">
                            <div className="text-2xl font-bold text-purple-600">{matchEnCours.statsJ2.smashAnnonces}</div>
                            <div className="text-gray-600">SA</div>
                          </div>
                          <div className="text-center p-2 bg-white rounded-lg">
                            <div className="text-2xl font-bold text-green-600">{matchEnCours.statsJ2.zonesLibres}</div>
                            <div className="text-gray-600">ZL</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  {/* Boutons d'action */}
                  <div className="grid md:grid-cols-2 gap-4">
                    <button 
                      onClick={() => { 
                        if (confirm('Terminer ce match ?')) terminerMatch(); 
                      }}
                      className="bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-5 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition"
                    >
                      ‚úì Terminer le match
                    </button>
                    <button 
                      onClick={annulerDernierPoint} 
                      disabled={historiquePoints.length === 0}
                      className="bg-gradient-to-r from-orange-500 to-orange-600 text-white py-5 rounded-xl font-bold text-lg disabled:from-gray-300 disabled:to-gray-400 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl transition disabled:shadow-none"
                    >
                      <RotateCcw className="w-5 h-5" />
                      Annuler dernier point ({historiquePoints.length})
                    </button>
                  </div>

                  <button 
                    onClick={() => {
                      if (confirm('Annuler ce match ?')) { 
                        setMatchEnCours(null); 
                        setHistoriquePoints([]); 
                        setTimerActif(false); 
                        setPhase('selection'); 
                      }
                    }}
                    className="w-full mt-4 bg-gradient-to-r from-gray-600 to-gray-700 text-white py-4 rounded-xl font-bold hover:from-gray-700 hover:to-gray-800 transition"
                  >
                    ‚Üê Retour √† la s√©lection
                  </button>
                </div>

                {/* Modal de s√©lection de zone - AM√âLIOR√â pour afficher toutes les zones */}
                {showTerrain && (
                  <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                    <div className="glass rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                      <h3 className="text-2xl font-bold mb-4 text-center">üè∏ O√π le point a √©t√© marqu√© ?</h3>
                      
                      {/* Aper√ßu du terrain */}
                      <div className="mb-6 bg-gradient-to-br from-green-700 to-green-600 p-6 rounded-xl">
                        <svg viewBox="0 0 100 100" className="w-full max-w-md mx-auto bg-green-800 rounded-lg border-4 border-white shadow-xl">
                          <rect x="5" y="5" width="90" height="90" fill="#1a5e1a" stroke="#fff" strokeWidth="2"/>
                          <line x1="50" y1="5" x2="50" y2="95" stroke="#fff" strokeWidth="1.5"/>
                          <line x1="5" y1="50" x2="95" y2="50" stroke="#fff" strokeWidth="2"/>
                          <line x1="5" y1="30" x2="95" y2="30" stroke="#fff" strokeWidth="1" strokeDasharray="2,2"/>
                          <line x1="5" y1="70" x2="95" y2="70" stroke="#fff" strokeWidth="1" strokeDasharray="2,2"/>
                          <rect x="48" y="5" width="4" height="90" fill="#333" opacity="0.3"/>
                          
                          {/* Labels des zones */}
                          <text x="27.5" y="25" textAnchor="middle" fill="#fff" fontSize="6" fontWeight="bold">AVANT</text>
                          <text x="27.5" y="31" textAnchor="middle" fill="#fff" fontSize="6" fontWeight="bold">GAUCHE</text>
                          <text x="27.5" y="37" textAnchor="middle" fill="#fff" fontSize="8" fontWeight="bold">1</text>
                          
                          <text x="72.5" y="25" textAnchor="middle" fill="#fff" fontSize="6" fontWeight="bold">AVANT</text>
                          <text x="72.5" y="31" textAnchor="middle" fill="#fff" fontSize="6" fontWeight="bold">DROITE</text>
                          <text x="72.5" y="37" textAnchor="middle" fill="#fff" fontSize="8" fontWeight="bold">2</text>
                          
                          <text x="27.5" y="67" textAnchor="middle" fill="#fff" fontSize="6" fontWeight="bold">ARRI√àRE</text>
                          <text x="27.5" y="73" textAnchor="middle" fill="#fff" fontSize="6" fontWeight="bold">GAUCHE</text>
                          <text x="27.5" y="79" textAnchor="middle" fill="#fff" fontSize="8" fontWeight="bold">3</text>
                          
                          <text x="72.5" y="67" textAnchor="middle" fill="#fff" fontSize="6" fontWeight="bold">ARRI√àRE</text>
                          <text x="72.5" y="73" textAnchor="middle" fill="#fff" fontSize="6" fontWeight="bold">DROITE</text>
                          <text x="72.5" y="79" textAnchor="middle" fill="#fff" fontSize="8" fontWeight="bold">4</text>
                        </svg>
                      </div>

                      {/* Boutons de s√©lection - GRILLE 2x2 POUR TOUTES LES ZONES */}
                      <div className="grid grid-cols-2 gap-4 mb-6">
                        {[
                          {id: 1, label: '‚¨ÜÔ∏è Avant Gauche', color: 'from-green-500 to-green-600'},
                          {id: 2, label: '‚¨ÜÔ∏è Avant Droite', color: 'from-green-500 to-green-600'},
                          {id: 3, label: '‚¨áÔ∏è Arri√®re Gauche', color: 'from-green-700 to-green-800'},
                          {id: 4, label: '‚¨áÔ∏è Arri√®re Droite', color: 'from-green-700 to-green-800'}
                        ].map(zone => (
                          <button 
                            key={zone.id} 
                            onClick={() => {
                              const type = config.objetEnseignement === 'zones' ? 'zoneDangereuse' : 'zoneLibre';
                              ajouterPointAvecZone(showTerrain, type, zone.id);
                              setShowTerrain(false);
                            }}
                            className={`bg-gradient-to-br ${zone.color} hover:scale-105 text-white py-8 rounded-xl font-bold text-lg shadow-xl transform transition`}
                          >
                            <div className="text-3xl mb-2">{zone.id}</div>
                            <div>{zone.label}</div>
                          </button>
                        ))}
                      </div>

                      <button 
                        onClick={() => setShowTerrain(false)} 
                        className="w-full bg-gray-600 text-white py-4 rounded-xl font-bold text-lg hover:bg-gray-700 transition"
                      >
                        ‚úï Annuler
                      </button>
                    </div>
                  </div>
                )}
              </div>
            );
          }

          // STATISTIQUES D√âTAILL√âES
          if (phase === 'stats') {
            return (
              <div className="min-h-screen p-4">
                <div className="max-w-4xl mx-auto animate-slide-in">
                  <div className="glass rounded-3xl shadow-2xl p-8 mb-6">
                    <h2 className="text-3xl font-bold mb-6 flex items-center gap-3 bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent">
                      <TrendingUp className="w-8 h-8 text-emerald-600" />
                      Statistiques D√©taill√©es - {config.classe}
                    </h2>
                    
                    {/* Barre de progression globale */}
                    <div className="mb-8 p-5 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl border-2 border-emerald-200">
                      <h3 className="font-bold text-lg mb-3">üìà Progression globale</h3>
                      <div className="grid grid-cols-3 gap-4">
                        <div className="text-center p-3 bg-white rounded-lg">
                          <div className="text-3xl font-bold text-orange-600">
                            {Object.values(donnees).reduce((sum, j) => sum + j.zonesDangereuses, 0)}
                          </div>
                          <div className="text-xs text-gray-600">Zones dangereuses</div>
                        </div>
                        <div className="text-center p-3 bg-white rounded-lg">
                          <div className="text-3xl font-bold text-purple-600">
                            {Object.values(donnees).reduce((sum, j) => sum + j.smashAnnonces, 0)}
                          </div>
                          <div className="text-xs text-gray-600">Smashs annonc√©s</div>
                        </div>
                        <div className="text-center p-3 bg-white rounded-lg">
                          <div className="text-3xl font-bold text-green-600">
                            {Object.values(donnees).reduce((sum, j) => sum + j.zonesLibres, 0)}
                          </div>
                          <div className="text-xs text-gray-600">Zones libres</div>
                        </div>
                      </div>
                    </div>

                    <div className="space-y-6">
                      {Object.values(donnees)
                        .sort((a, b) => b.matchsGagnes - a.matchsGagnes)
                        .map((joueur, index) => {
                          const tauxVictoire = joueur.matchsJoues > 0 ? Math.round((joueur.matchsGagnes / joueur.matchsJoues) * 100) : 0;
                          
                          return (
                            <div key={`${joueur.prenom}_${joueur.nom}`} className="stat-card rounded-2xl p-6">
                              <div className="flex items-center gap-4 mb-4">
                                <span className={`text-3xl font-bold ${
                                  index === 0 ? 'text-yellow-500' :
                                  index === 1 ? 'text-gray-400' :
                                  index === 2 ? 'text-amber-600' :
                                  'text-gray-500'
                                }`}>
                                  {index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : `#${index + 1}`}
                                </span>
                                <div className="flex-1">
                                  <h3 className="text-2xl font-bold text-white">{joueur.prenom} {joueur.nom}</h3>
                                  <div className="flex items-center gap-2 mt-1">
                                    <div className="h-3 flex-1 bg-white bg-opacity-20 rounded-full overflow-hidden">
                                      <div 
                                        className="h-full bg-gradient-to-r from-yellow-400 to-yellow-500 rounded-full transition-all duration-500"
                                        style={{width: `${tauxVictoire}%`}}
                                      />
                                    </div>
                                    <span className="text-white font-bold text-sm">{tauxVictoire}%</span>
                                  </div>
                                </div>
                              </div>

                              {/* Statistiques principales */}
                              <div className="grid grid-cols-2 md:grid-cols-5 gap-3 mb-4">
                                <div className="text-center p-3 bg-white bg-opacity-10 rounded-xl">
                                  <div className="text-3xl font-bold text-white">{joueur.matchsGagnes}/{joueur.matchsJoues}</div>
                                  <div className="text-xs text-white text-opacity-80">Victoires</div>
                                </div>
                                <div className="text-center p-3 bg-white bg-opacity-10 rounded-xl">
                                  <div className="text-3xl font-bold text-orange-400">{joueur.zonesDangereuses}</div>
                                  <div className="text-xs text-white text-opacity-80">Zones danger.</div>
                                </div>
                                <div className="text-center p-3 bg-white bg-opacity-10 rounded-xl">
                                  <div className="text-3xl font-bold text-purple-400">{joueur.smashAnnonces}</div>
                                  <div className="text-xs text-white text-opacity-80">Smashs ann.</div>
                                </div>
                                <div className="text-center p-3 bg-white bg-opacity-10 rounded-xl">
                                  <div className="text-3xl font-bold text-green-400">{joueur.zonesLibres}</div>
                                  <div className="text-xs text-white text-opacity-80">Zones libres</div>
                                </div>
                                <div className="text-center p-3 bg-white bg-opacity-10 rounded-xl">
                                  <div className="text-3xl font-bold text-yellow-400">{joueur.pointsDoubles}</div>
                                  <div className="text-xs text-white text-opacity-80">Pts doubles</div>
                                </div>
                              </div>

                              {/* D√©tail des victoires */}
                              {joueur.victoires && joueur.victoires.length > 0 && (
                                <div className="mb-4 p-4 bg-white bg-opacity-10 rounded-xl">
                                  <p className="text-sm font-bold mb-3 text-white">üèÜ Indices de r√©ussite :</p>
                                  <div className="space-y-2">
                                    {joueur.victoires.map((v, i) => (
                                      <div key={i} className="flex items-center justify-between text-sm bg-white bg-opacity-10 p-2 rounded-lg">
                                        <span className="text-white">vs {v.adversaire}</span>
                                        <span className="flex items-center gap-3">
                                          <span className="text-gray-200 font-medium">{v.score}</span>
                                          <span className={`font-bold ${v.indice.couleur.replace('text-', 'text-')}`}>
                                            {v.indice.icon} {v.indice.texte}
                                          </span>
                                          <span className="text-yellow-300 font-bold">({v.bonus} bonus)</span>
                                        </span>
                                      </div>
                                    ))}
                                  </div>
                                </div>
                              )}

                              {/* Terrain */}
                              {joueur.pointsTerrain && joueur.pointsTerrain.length > 0 && (
                                <div className="mt-4">
                                  <TerrainBadminton 
                                    points={joueur.pointsTerrain} 
                                    joueurNom={`${joueur.prenom} ${joueur.nom}`} 
                                  />
                                </div>
                              )}

                              {/* Bilan points */}
                              <div className="pt-4 border-t border-white border-opacity-20 text-sm text-white text-opacity-90 text-center">
                                Points: <span className="font-bold text-green-400">{joueur.pointsMarques}</span> marqu√©s / 
                                <span className="font-bold text-red-400"> {joueur.pointsEncaisses}</span> encaiss√©s
                                {joueur.defaitesMortSubite > 0 && (
                                  <span className="ml-3 text-red-400 font-bold">
                                    | ‚ö†Ô∏è {joueur.defaitesMortSubite} mort subite
                                  </span>
                                )}
                              </div>
                            </div>
                          );
                        })}
                    </div>
                  </div>

                  <button 
                    onClick={() => setPhase('selection')} 
                    className="w-full bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-5 rounded-xl font-bold text-lg hover:from-emerald-700 hover:to-teal-700 transition shadow-lg"
                  >
                    ‚Üê Retour √† la s√©lection
                  </button>
                </div>
              </div>
            );
          }

          return null;
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<BadmintonTracker />);
    </script>
</body>
</html>
