<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#4F46E5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Badminton">
    <title>Badminton - Recueil de donn√©es EPS</title>
    <link rel="manifest" href="/manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * { -webkit-tap-highlight-color: transparent; -webkit-touch-callout: none; }
        input, textarea { -webkit-user-select: text; user-select: text; }
        body { overscroll-behavior: none; margin: 0; font-family: system-ui, sans-serif; }
    </style>
</head>
   <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(reg => console.log('Service Worker enregistr√©'))
                    .catch(err => console.log('Erreur Service Worker:', err));
            });
        }
    </script> 
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        const Icon = ({d, className = "w-6 h-6"}) => <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d={d} /></svg>;
        const Users = ({className}) => <Icon className={className} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />;
        const Target = ({className}) => <svg className={className || "w-6 h-6"} fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>;
        const Zap = ({className}) => <Icon className={className} d="M13 10V3L4 14h7v7l9-11h-7z" />;
        const MapPin = ({className}) => <Icon className={className} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />;
        const Clock = ({className}) => <svg className={className || "w-6 h-6"} fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>;
        const Trophy = ({className}) => <Icon className={className} d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />;
        const RotateCcw = ({className}) => <Icon className={className} d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6" />;
        const ChevronRight = ({className}) => <Icon className={className} d="M9 5l7 7-7 7" />;
        const Trash2 = ({className}) => <Icon className={className} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />;
        const AlertCircle = ({className}) => <svg className={className || "w-6 h-6"} fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 8v4m0 4h.01"/></svg>;
        const BookOpen = ({className}) => <Icon className={className} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />;
        const Award = ({className}) => <svg className={className || "w-6 h-6"} fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="8" r="7"/><path d="M8.21 13.89L7 23l5-3 5 3-1.21-9.12"/></svg>;
        const TrendingUp = ({className}) => <Icon className={className} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />;

        function BadmintonTracker() {
          const [config, setConfig] = useState({classe: '', nombreJoueurs: 0, joueurs: [], typeMatch: '', mortSubite: false, objetEnseignement: '', pointsDoubles: false});
          const [poule, setPoule] = useState([]);
          const [matchEnCours, setMatchEnCours] = useState(null);
          const [historiquePoints, setHistoriquePoints] = useState([]);
          const [timer, setTimer] = useState(180);
          const [timerActif, setTimerActif] = useState(false);
          const [phase, setPhase] = useState('classe');
          const [donnees, setDonnees] = useState({});
          const [classes, setClasses] = useState({});
          const [showDeleteModal, setShowDeleteModal] = useState(false);
          const [showTerrain, setShowTerrain] = useState(false);

          useEffect(() => {
            const saved = localStorage.getItem('badminton-classes');
            if (saved) try { setClasses(JSON.parse(saved)); } catch(e) {}
          }, []);

          useEffect(() => {
            if (Object.keys(classes).length > 0) {
              localStorage.setItem('badminton-classes', JSON.stringify(classes));
            }
          }, [classes]);

          useEffect(() => {
            let interval;
            if (timerActif && timer > 0) {
              interval = setInterval(() => {
                setTimer(prev => {
                  if (prev <= 1) { setTimerActif(false); alert('Temps √©coul√© !'); return 0; }
                  return prev - 1;
                });
              }, 1000);
            }
            return () => clearInterval(interval);
          }, [timerActif, timer]);

          const formatTimer = (s) => `${Math.floor(s/60)}:${(s%60).toString().padStart(2,'0')}`;
          
          const ajouterJoueur = () => {
            setConfig(prev => ({...prev, joueurs: [...prev.joueurs, { nom: `Joueur${prev.joueurs.length + 1}`, prenom: '' }]}));
          };

          const modifierJoueur = (index, field, value) => {
            const nouveaux = [...config.joueurs];
            nouveaux[index][field] = value;
            setConfig({...config, joueurs: nouveaux});
          };

          const demarrerPoule = () => {
            const nouvelleDonnees = {};
            config.joueurs.forEach(j => {
              nouvelleDonnees[j.nom] = {
                nom: j.nom, prenom: j.prenom, zonesDangereuses: 0, smashAnnonces: 0, zonesLibres: 0,
                pointsDoubles: 0, matchsJoues: 0, matchsGagnes: 0, pointsMarques: 0, pointsEncaisses: 0,
                defaitesMortSubite: 0, victoires: [], pointsTerrain: []
              };
            });
            setDonnees(nouvelleDonnees);
            setPoule(config.joueurs);
            setClasses(prev => ({...prev, [config.classe]: nouvelleDonnees}));
            setPhase('selection');
          };

          const demarrerMatch = (j1, j2) => {
            const pointsMax = config.typeMatch === '11pts' ? 11 : config.typeMatch === '15pts' ? 15 : 999;
            setMatchEnCours({
              joueur1: j1.nom, joueur2: j2.nom, prenomJ1: j1.prenom, prenomJ2: j2.prenom,
              scoreJ1: 0, scoreJ2: 0, pointsDoublesJ1: 0, pointsDoublesJ2: 0,
              statsJ1: { zonesDangereuses: 0, smashAnnonces: 0, zonesLibres: 0 },
              statsJ2: { zonesDangereuses: 0, smashAnnonces: 0, zonesLibres: 0 },
              terrainJ1: [], terrainJ2: [], pointsMax, changementCote: Math.floor(pointsMax / 2), coteChange: false
            });
            setHistoriquePoints([]);
            if (config.typeMatch === '3min') { setTimer(180); setTimerActif(true); }
            setPhase('jeu');
          };

          const ajouterPointAvecZone = (joueur, type, zone) => {
            setMatchEnCours(prev => {
              const nouveau = {...prev};
              const isDouble = type !== 'normal';
              
              setHistoriquePoints(hist => [...hist, {joueur, type, zone, etat: JSON.parse(JSON.stringify(prev))}]);
              
              if (joueur === 'j1') {
                nouveau.scoreJ1++;
                if (isDouble && config.pointsDoubles) nouveau.scoreJ1++;
                if (isDouble) nouveau.pointsDoublesJ1++;
                if (type === 'zoneDangereuse') nouveau.statsJ1.zonesDangereuses++;
                else if (type === 'smashAnnonce') nouveau.statsJ1.smashAnnonces++;
                else if (type === 'zoneLibre') nouveau.statsJ1.zonesLibres++;
                if (zone) nouveau.terrainJ1.push(zone);
              } else {
                nouveau.scoreJ2++;
                if (isDouble && config.pointsDoubles) nouveau.scoreJ2++;
                if (isDouble) nouveau.pointsDoublesJ2++;
                if (type === 'zoneDangereuse') nouveau.statsJ2.zonesDangereuses++;
                else if (type === 'smashAnnonce') nouveau.statsJ2.smashAnnonces++;
                else if (type === 'zoneLibre') nouveau.statsJ2.zonesLibres++;
                if (zone) nouveau.terrainJ2.push(zone);
              }

              if (config.mortSubite) {
                if (nouveau.pointsDoublesJ2 >= 3) { setTimeout(() => terminerMatch(true, 'j1'), 100); return nouveau; }
                if (nouveau.pointsDoublesJ1 >= 3) { setTimeout(() => terminerMatch(true, 'j2'), 100); return nouveau; }
              }

              if (!nouveau.coteChange && config.typeMatch !== '3min') {
                const total = nouveau.scoreJ1 + nouveau.scoreJ2;
                if (total >= nouveau.changementCote) {
                  nouveau.coteChange = true;
                  setTimeout(() => alert('Changement de c√¥t√© !'), 100);
                }
              }

              if (config.typeMatch !== '3min') {
                if (nouveau.scoreJ1 >= nouveau.pointsMax || nouveau.scoreJ2 >= nouveau.pointsMax) {
                  setTimeout(() => terminerMatch(), 100);
                }
              }
              
              return nouveau;
            });
          };

          const ajouterPoint = (joueur, type) => ajouterPointAvecZone(joueur, type, null);

          const annulerDernierPoint = () => {
            if (historiquePoints.length === 0) { alert('Aucun point √† annuler'); return; }
            const dernierPoint = historiquePoints[historiquePoints.length - 1];
            setMatchEnCours(dernierPoint.etat);
            setHistoriquePoints(hist => hist.slice(0, -1));
          };

          const getIndiceReussite = (bonus, victoire) => {
            if (!victoire) return { texte: 'D√©faite', couleur: 'text-gray-600', icon: '‚ùå' };
            if (bonus >= 4) return { texte: 'Excellent', couleur: 'text-purple-600', icon: 'üèÜ' };
            if (bonus >= 3) return { texte: 'Tr√®s bien', couleur: 'text-green-600', icon: '‚≠ê' };
            if (bonus >= 2) return { texte: 'Bien', couleur: 'text-blue-600', icon: '‚úì' };
            if (bonus >= 1) return { texte: 'Assez bien', couleur: 'text-yellow-600', icon: '‚óã' };
            return { texte: 'Victoire simple', couleur: 'text-gray-600', icon: '‚Ä¢' };
          };

          const terminerMatch = (mortSubite = false, gagnant = null) => {
            if (!matchEnCours) return;
            
            const {joueur1, joueur2, prenomJ1, prenomJ2, scoreJ1, scoreJ2, statsJ1, statsJ2, pointsDoublesJ1, pointsDoublesJ2, terrainJ1, terrainJ2} = matchEnCours;
            const victoireJ1 = mortSubite ? gagnant === 'j1' : scoreJ1 > scoreJ2;
            const victoireJ2 = mortSubite ? gagnant === 'j2' : scoreJ2 > scoreJ1;
            
            setDonnees(prev => {
              const nouveau = {...prev};
              
              nouveau[joueur1].matchsJoues++;
              nouveau[joueur1].pointsMarques += scoreJ1;
              nouveau[joueur1].pointsEncaisses += scoreJ2;
              nouveau[joueur1].zonesDangereuses += statsJ1.zonesDangereuses;
              nouveau[joueur1].smashAnnonces += statsJ1.smashAnnonces;
              nouveau[joueur1].zonesLibres += statsJ1.zonesLibres;
              nouveau[joueur1].pointsDoubles += pointsDoublesJ1;
              nouveau[joueur1].pointsTerrain.push(...terrainJ1);
              
              if (victoireJ1) {
                nouveau[joueur1].matchsGagnes++;
                nouveau[joueur1].victoires.push({
                  adversaire: `${prenomJ2} ${joueur2}`,
                  score: `${scoreJ1}-${scoreJ2}`,
                  bonus: pointsDoublesJ1,
                  indice: getIndiceReussite(pointsDoublesJ1, true)
                });
              } else if (mortSubite) nouveau[joueur1].defaitesMortSubite++;
              
              nouveau[joueur2].matchsJoues++;
              nouveau[joueur2].pointsMarques += scoreJ2;
              nouveau[joueur2].pointsEncaisses += scoreJ1;
              nouveau[joueur2].zonesDangereuses += statsJ2.zonesDangereuses;
              nouveau[joueur2].smashAnnonces += statsJ2.smashAnnonces;
              nouveau[joueur2].zonesLibres += statsJ2.zonesLibres;
              nouveau[joueur2].pointsDoubles += pointsDoublesJ2;
              nouveau[joueur2].pointsTerrain.push(...terrainJ2);
              
              if (victoireJ2) {
                nouveau[joueur2].matchsGagnes++;
                nouveau[joueur2].victoires.push({
                  adversaire: `${prenomJ1} ${joueur1}`,
                  score: `${scoreJ2}-${scoreJ1}`,
                  bonus: pointsDoublesJ2,
                  indice: getIndiceReussite(pointsDoublesJ2, true)
                });
              } else if (mortSubite) nouveau[joueur2].defaitesMortSubite++;
              
              return nouveau;
            });
            
            setClasses(prev => ({...prev, [config.classe]: donnees}));
            setTimerActif(false);
            setMatchEnCours(null);
            setHistoriquePoints([]);
            setPhase('selection');
          };

          const TerrainBadminton = ({ points, joueurNom }) => {
            const zones = [
              { id: 1, x: 10, y: 10, w: 35, h: 35 },
              { id: 2, x: 55, y: 10, w: 35, h: 35 },
              { id: 3, x: 10, y: 55, w: 35, h: 35 },
              { id: 4, x: 55, y: 55, w: 35, h: 35 }
            ];
            const countZone = (zoneId) => points.filter(p => p === zoneId).length;

            return (
              <div className="bg-gradient-to-br from-green-700 to-green-600 rounded-lg p-4 border-4 border-white shadow-lg">
                <h4 className="text-center font-bold mb-2 text-sm text-white">{joueurNom}</h4>
                <svg viewBox="0 0 100 100" className="w-full max-w-xs mx-auto bg-green-800 rounded">
                  <rect x="5" y="5" width="90" height="90" fill="#1a5e1a" stroke="#fff" strokeWidth="2"/>
                  <line x1="50" y1="5" x2="50" y2="95" stroke="#fff" strokeWidth="1.5"/>
                  <line x1="5" y1="50" x2="95" y2="50" stroke="#fff" strokeWidth="2"/>
                  <line x1="5" y1="30" x2="95" y2="30" stroke="#fff" strokeWidth="1" strokeDasharray="2,2"/>
                  <line x1="5" y1="70" x2="95" y2="70" stroke="#fff" strokeWidth="1" strokeDasharray="2,2"/>
                  <rect x="48" y="5" width="4" height="90" fill="#333" opacity="0.3"/>
                  
                  {zones.map(zone => {
                    const count = countZone(zone.id);
                    return (
                      <g key={zone.id}>
                        <rect x={zone.x} y={zone.y} width={zone.w} height={zone.h} 
                          fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.3)" strokeWidth="0.5"/>
                        {count > 0 && (
                          <>
                            <circle cx={zone.x + zone.w/2} cy={zone.y + zone.h/2} r="14" 
                              fill="#FFD700" stroke="#FFA500" strokeWidth="2"/>
                            <text x={zone.x + zone.w/2} y={zone.y + zone.h/2 - 2} 
                              textAnchor="middle" fontSize="10" fontWeight="bold" fill="#000">üè∏</text>
                            <text x={zone.x + zone.w/2} y={zone.y + zone.h/2 + 10} 
                              textAnchor="middle" fontSize="12" fontWeight="bold" fill="#000">{count}</text>
                          </>
                        )}
                      </g>
                    );
                  })}
                </svg>
                <div className="grid grid-cols-2 gap-1 mt-3 text-xs">
                  <div className="bg-white bg-opacity-20 p-2 rounded text-white font-semibold">
                    <span className="block text-center">‚¨ÜÔ∏è Avant G</span>
                    <span className="block text-center text-lg">{countZone(1)}</span>
                  </div>
                  <div className="bg-white bg-opacity-20 p-2 rounded text-white font-semibold">
                    <span className="block text-center">‚¨ÜÔ∏è Avant D</span>
                    <span className="block text-center text-lg">{countZone(2)}</span>
                  </div>
                  <div className="bg-white bg-opacity-20 p-2 rounded text-white font-semibold">
                    <span className="block text-center">‚¨áÔ∏è Arri√®re G</span>
                    <span className="block text-center text-lg">{countZone(3)}</span>
                  </div>
                  <div className="bg-white bg-opacity-20 p-2 rounded text-white font-semibold">
                    <span className="block text-center">‚¨áÔ∏è Arri√®re D</span>
                    <span className="block text-center text-lg">{countZone(4)}</span>
                  </div>
                </div>
              </div>
            );
          };

          if (phase === 'classe') {
            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
                <div className="max-w-2xl mx-auto">
                  <div className="bg-white rounded-xl shadow-lg p-8">
                    <div className="text-center mb-8">
                      <BookOpen className="w-12 h-12 text-indigo-600 mx-auto mb-4" />
                      <h1 className="text-4xl font-bold text-gray-800 mb-2">Badminton</h1>
                      <p className="text-gray-600">Gestion par classe</p>
                    </div>
                    <div className="mb-6">
                      <label className="block text-sm font-medium text-gray-700 mb-2">Nom de la classe</label>
                      <input type="text" value={config.classe} onChange={(e) => setConfig({...config, classe: e.target.value})}
                        className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none"
                        placeholder="Ex: 3√®me A, 2nde 5..." />
                    </div>
                    {Object.keys(classes).length > 0 && (
                      <div className="mb-6">
                        <div className="flex justify-between items-center mb-3">
                          <p className="text-sm font-medium text-gray-700">Classes existantes</p>
                          <button onClick={() => setShowDeleteModal(true)} className="text-red-600 text-sm flex items-center gap-1">
                            <Trash2 className="w-4 h-4" /> G√©rer
                          </button>
                        </div>
                        <div className="space-y-2">
                          {Object.keys(classes).map(cls => (
                            <button key={cls} onClick={() => { setConfig({...config, classe: cls}); setDonnees(classes[cls]); }}
                              className="w-full text-left px-4 py-3 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-200">
                              <span className="font-semibold">{cls}</span>
                              <span className="text-sm text-gray-500 ml-2">({Object.keys(classes[cls]).length} √©l√®ves)</span>
                            </button>
                          ))}
                        </div>
                      </div>
                    )}
                    <button onClick={() => setPhase('config')} disabled={!config.classe.trim()}
                      className="w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 disabled:bg-gray-300 transition">
                      Continuer
                    </button>
                  </div>
                </div>
                {showDeleteModal && (
                  <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                    <div className="bg-white rounded-xl p-6 max-w-md w-full">
                      <h3 className="text-xl font-bold mb-4">Supprimer des classes</h3>
                      <div className="space-y-2 mb-6">
                        {Object.keys(classes).length === 0 ? (
                          <p className="text-gray-500 text-center py-4">Aucune classe</p>
                        ) : Object.keys(classes).map(cls => (
                          <div key={cls} className="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                            <span>{cls}</span>
                            <button onClick={() => {
                              if (confirm(`Supprimer ${cls} ?`)) {
                                const updated = {...classes};
                                delete updated[cls];
                                setClasses(updated);
                                if (Object.keys(updated).length === 0) {
                                  localStorage.removeItem('badminton-classes');
                                  setShowDeleteModal(false);
                                } else {
                                  localStorage.setItem('badminton-classes', JSON.stringify(updated));
                                }
                                alert(`Classe "${cls}" supprim√©e`);
                              }
                            }} className="text-red-600 p-2 hover:bg-red-50 rounded">
                              <Trash2 className="w-5 h-5" />
                            </button>
                          </div>
                        ))}
                      </div>
                      <button onClick={() => setShowDeleteModal(false)} className="w-full bg-gray-600 text-white py-2 rounded-lg">Fermer</button>
                    </div>
                  </div>
                )}
              </div>
            );
          }

          if (phase === 'config') {
            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
                <div className="max-w-2xl mx-auto">
                  <div className="bg-white rounded-xl shadow-lg p-8">
                    <div className="text-center mb-8">
                      <Users className="w-12 h-12 text-indigo-600 mx-auto mb-4" />
                      <h1 className="text-3xl font-bold text-gray-800 mb-2">{config.classe}</h1>
                      <p className="text-gray-600">Configuration de la poule</p>
                    </div>
                    {config.nombreJoueurs === 0 ? (
                      <div>
                        <p className="text-center font-medium mb-6">Combien d'√©l√®ves dans la poule ?</p>
                        <div className="grid grid-cols-4 gap-3">
                          {[2, 3, 4, 5].map(nb => (
                            <button key={nb} onClick={() => {
                                setConfig({...config, nombreJoueurs: nb, joueurs: []});
                                for (let i = 0; i < nb; i++) setTimeout(() => ajouterJoueur(), i * 50);
                              }}
                              className="bg-indigo-600 text-white py-6 rounded-lg font-bold text-2xl hover:bg-indigo-700">
                              {nb}
                            </button>
                          ))}
                        </div>
                      </div>
                    ) : (
                      <div>
                        <p className="text-center font-medium mb-4">√âl√®ves ({config.joueurs.length}/{config.nombreJoueurs})</p>
                        <div className="space-y-3 mb-6">
                          {config.joueurs.map((joueur, index) => (
                            <div key={index} className="grid grid-cols-2 gap-2">
                              <input type="text" value={joueur.nom} onChange={(e) => modifierJoueur(index, 'nom', e.target.value)}
                                className="px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none"
                                placeholder="Nom" />
                              <input type="text" value={joueur.prenom} onChange={(e) => modifierJoueur(index, 'prenom', e.target.value)}
                                className="px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none"
                                placeholder="Pr√©nom" />
                            </div>
                          ))}
                        </div>
                        <div className="flex gap-3">
                          <button onClick={() => setPhase('classe')} className="flex-1
                          bg-gray-500 text-white py-3 rounded-lg font-semibold">Retour</button>
                          <button onClick={() => setPhase('objetEnseignement')} disabled={config.joueurs.some(j => !j.nom.trim() || !j.prenom.trim())}
                            className="flex-1 bg-indigo-600 text-white py-3 rounded-lg font-semibold disabled:bg-gray-300">Suivant</button>
                        </div>
                      </div>
                    )}
                  </div>
                </div>
              </div>
            );
          }

          if (phase === 'objetEnseignement') {
            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
                <div className="max-w-2xl mx-auto">
                  <div className="bg-white rounded-xl shadow-lg p-8">
                    <h2 className="text-2xl font-bold text-center mb-6">Objet d'enseignement</h2>
                    <div className="space-y-3 mb-6">
                      <button onClick={() => setConfig({...config, objetEnseignement: 'smash'})}
                        className={`w-full p-4 rounded-lg border-2 transition ${config.objetEnseignement === 'smash' ? 'border-purple-600 bg-purple-50' : 'border-gray-300'}`}>
                        <div className="flex items-center gap-3">
                          <Zap className="w-6 h-6 text-purple-600" />
                          <div className="text-left flex-1">
                            <div className="font-bold">Travail du smash annonc√©</div>
                            <div className="text-sm text-gray-600">Crier "smash" avant de frapper</div>
                          </div>
                        </div>
                      </button>
                      <button onClick={() => setConfig({...config, objetEnseignement: 'zones'})}
                        className={`w-full p-4 rounded-lg border-2 transition ${config.objetEnseignement === 'zones' ? 'border-orange-600 bg-orange-50' : 'border-gray-300'}`}>
                        <div className="flex items-center gap-3">
                          <Target className="w-6 h-6 text-orange-600" />
                          <div className="text-left flex-1">
                            <div className="font-bold">Viser les zones dangereuses</div>
                            <div className="text-sm text-gray-600">Zones avant et arri√®re du terrain</div>
                          </div>
                        </div>
                      </button>
                      <button onClick={() => setConfig({...config, objetEnseignement: 'espaces'})}
                        className={`w-full p-4 rounded-lg border-2 transition ${config.objetEnseignement === 'espaces' ? 'border-green-600 bg-green-50' : 'border-gray-300'}`}>
                        <div className="flex items-center gap-3">
                          <MapPin className="w-6 h-6 text-green-600" />
                          <div className="text-left flex-1">
                            <div className="font-bold">Viser les espaces libres</div>
                            <div className="text-sm text-gray-600">O√π l'adversaire n'est pas</div>
                          </div>
                        </div>
                      </button>
                    </div>
                    <div className="flex gap-3">
                      <button onClick={() => setPhase('config')} className="flex-1 bg-gray-500 text-white py-3 rounded-lg font-semibold">Retour</button>
                      <button onClick={() => setPhase('typeMatch')} disabled={!config.objetEnseignement}
                        className="flex-1 bg-indigo-600 text-white py-3 rounded-lg font-semibold disabled:bg-gray-300">Suivant</button>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          if (phase === 'typeMatch') {
            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
                <div className="max-w-2xl mx-auto">
                  <div className="bg-white rounded-xl shadow-lg p-8">
                    <h2 className="text-2xl font-bold text-center mb-6">Configuration du match</h2>
                    <div className="mb-6">
                      <h3 className="font-semibold text-gray-700 mb-3">Type de match</h3>
                      <div className="space-y-3">
                        <button onClick={() => setConfig({...config, typeMatch: '3min'})}
                          className={`w-full p-4 rounded-lg border-2 ${config.typeMatch === '3min' ? 'border-indigo-600 bg-indigo-50' : 'border-gray-300'}`}>
                          <div className="flex items-center gap-3">
                            <Clock className="w-6 h-6 text-indigo-600" />
                            <div className="text-left"><div className="font-bold">Match en 3 minutes</div><div className="text-sm text-gray-600">Dur√©e limit√©e</div></div>
                          </div>
                        </button>
                        <button onClick={() => setConfig({...config, typeMatch: '11pts'})}
                          className={`w-full p-4 rounded-lg border-2 ${config.typeMatch === '11pts' ? 'border-indigo-600 bg-indigo-50' : 'border-gray-300'}`}>
                          <div className="flex items-center gap-3">
                            <Target className="w-6 h-6 text-indigo-600" />
                            <div className="text-left"><div className="font-bold">Match en 11 points</div><div className="text-sm text-gray-600">Changement √† 6 points</div></div>
                          </div>
                        </button>
                        <button onClick={() => setConfig({...config, typeMatch: '15pts'})}
                          className={`w-full p-4 rounded-lg border-2 ${config.typeMatch === '15pts' ? 'border-indigo-600 bg-indigo-50' : 'border-gray-300'}`}>
                          <div className="flex items-center gap-3">
                            <Target className="w-6 h-6 text-indigo-600" />
                            <div className="text-left"><div className="font-bold">Match en 15 points</div><div className="text-sm text-gray-600">Changement √† 8 points</div></div>
                          </div>
                        </button>
                      </div>
                    </div>
                    <div className="mb-6">
                      <h3 className="font-semibold text-gray-700 mb-3">Options de jeu</h3>
                      <div className="space-y-3">
                        <label className="flex items-center p-4 rounded-lg border-2 cursor-pointer transition hover:bg-blue-50 border-gray-300">
                          <input type="checkbox" checked={config.pointsDoubles} onChange={(e) => setConfig({...config, pointsDoubles: e.target.checked})}
                            className="w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 cursor-pointer" />
                          <div className="ml-3 flex items-center gap-3 flex-1">
                            <Award className="w-6 h-6 text-blue-600" />
                            <div><div className="font-bold text-gray-800">Points doubles</div>
                              <div className="text-sm text-gray-600">{config.pointsDoubles ? "‚úì Les actions de l'objet valent 2 points" : "Toutes les actions valent 1 point"}</div>
                            </div>
                          </div>
                        </label>
                        <label className="flex items-center p-4 rounded-lg border-2 cursor-pointer transition hover:bg-red-50 border-gray-300">
                          <input type="checkbox" checked={config.mortSubite} onChange={(e) => setConfig({...config, mortSubite: e.target.checked})}
                            className="w-5 h-5 text-red-600 rounded focus:ring-2 focus:ring-red-500 cursor-pointer" />
                          <div className="ml-3 flex items-center gap-3 flex-1">
                            <AlertCircle className="w-6 h-6 text-red-600" />
                            <div><div className="font-bold text-gray-800">Mort subite</div>
                              <div className="text-sm text-gray-600">D√©faite apr√®s 3 points doubles encaiss√©s</div>
                            </div>
                          </div>
                        </label>
                      </div>
                    </div>
                    <div className="flex gap-3">
                      <button onClick={() => setPhase('objetEnseignement')} className="flex-1 bg-gray-500 text-white py-3 rounded-lg font-semibold">Retour</button>
                      <button onClick={demarrerPoule} disabled={!config.typeMatch}
                        className="flex-1 bg-indigo-600 text-white py-3 rounded-lg font-semibold disabled:bg-gray-300">D√©marrer</button>
                    </div>
                  </div>
                </div>
              </div>
            );
          }

          if (phase === 'selection') {
            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
                <div className="max-w-4xl mx-auto">
                  <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <div className="flex justify-between items-center mb-4">
                      <h2 className="text-2xl font-bold">{config.classe}</h2>
                      <div className="text-sm text-gray-600">
                        {config.objetEnseignement === 'smash' && '‚ö° Smash'}
                        {config.objetEnseignement === 'zones' && 'üéØ Zones'}
                        {config.objetEnseignement === 'espaces' && 'üìç Espaces'}
                        {' | '}{config.pointsDoubles ? '√ó2 pts' : '√ó1 pt'}{' | '}
                        {config.typeMatch === '3min' ? '‚è±Ô∏è 3min' : config.typeMatch === '11pts' ? '11pts' : '15pts'}
                        {config.mortSubite && ' ‚ö†Ô∏è'}
                      </div>
                    </div>
                    <div className="grid gap-3">
                      {poule.map((j1, i) => 
                        poule.slice(i + 1).map(j2 => (
                          <button key={`${j1.nom}-${j2.nom}`} onClick={() => demarrerMatch(j1, j2)}
                            className="bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-4 rounded-lg flex items-center justify-between">
                            <span className="font-semibold">{j1.prenom} {j1.nom} vs {j2.prenom} {j2.nom}</span>
                            <ChevronRight className="w-6 h-6" />
                          </button>
                        ))
                      )}
                    </div>
                  </div>
                  <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <div className="flex justify-between items-center mb-4">
                      <h2 className="text-xl font-bold flex items-center gap-2">
                        <Trophy className="w-6 h-6 text-yellow-500" />Classement
                      </h2>
                      <button onClick={() => setPhase('stats')} className="bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-semibold">
                        Stats d√©taill√©es
                      </button>
                    </div>
                    <div className="space-y-2">
                      {Object.values(donnees).sort((a, b) => b.matchsGagnes - a.matchsGagnes).map((joueur, index) => (
                        <div key={joueur.nom} className="flex justify-between items-center bg-gray-50 p-3 rounded-lg">
                          <div className="flex items-center gap-3">
                            <span className="font-bold text-lg w-6">{index + 1}</span>
                            <span className="font-semibold">{joueur.prenom} {joueur.nom}</span>
                          </div>
                          <div className="flex gap-4 text-sm items-center">
                            <span className="text-green-600 font-semibold">{joueur.matchsGagnes}V</span>
                            <span className="text-gray-600">{joueur.matchsJoues - joueur.matchsGagnes}D</span>
                            <span className="text-gray-500">({joueur.pointsMarques}-{joueur.pointsEncaisses})</span>
                            {joueur.victoires.length > 0 && (
                              <span className={`text-xs font-bold ${joueur.victoires[joueur.victoires.length - 1].indice.couleur}`}>
                                {joueur.victoires[joueur.victoires.length - 1].indice.icon}
                              </span>
                            )}
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                  <button onClick={() => {
                      if (confirm('Nouvelle poule ?')) {
                        setConfig({ classe: '', nombreJoueurs: 0, joueurs: [], typeMatch: '', mortSubite: false, objetEnseignement: '', pointsDoubles: false });
                        setPoule([]); setMatchEnCours(null); setHistoriquePoints([]); setDonnees({}); setPhase('classe');
                      }
                    }}
                    className="w-full bg-red-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2">
                    <RotateCcw className="w-5 h-5" />Nouvelle poule
                  </button>
                </div>
              </div>
            );
          }

          if (phase === 'jeu' && matchEnCours) {
            const getButtonForObjet = (joueur) => {
              const pointsText = config.pointsDoubles ? '+2' : '+1';
              if (config.objetEnseignement === 'smash') {
                return (
                  <button onClick={() => ajouterPoint(joueur, 'smashAnnonce')}
                    className="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-4 rounded-lg font-semibold flex items-center justify-center gap-2">
                    <Zap className="w-5 h-5" />Smash annonc√© ({pointsText})
                  </button>
                );
              } else if (config.objetEnseignement === 'zones') {
                return (
                  <button onClick={() => setShowTerrain(joueur)}
                    className="w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-4 rounded-lg font-semibold flex items-center justify-center gap-2">
                    <Target className="w-5 h-5" />Zone dangereuse ({pointsText})
                  </button>
                );
              } else {
                return (
                  <button onClick={() => setShowTerrain(joueur)}
                    className="w-full bg-gradient-to-r from-green-500 to-teal-500 text-white py-4 rounded-lg font-semibold flex items-center justify-center gap-2">
                    <MapPin className="w-5 h-5" />Zone libre ({pointsText})
                  </button>
                );
              }
            };

            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
                <div className="max-w-6xl mx-auto">
                  <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
                    {config.typeMatch === '3min' && (
                      <div className="text-center mb-4">
                        <div className={`inline-block px-6 py-2 rounded-full font-bold text-2xl ${timer <= 30 ? 'bg-red-100 text-red-600' : 'bg-blue-100 text-blue-600'}`}>
                          {formatTimer(timer)}
                        </div>
                        <button onClick={() => setTimerActif(!timerActif)} className="block mx-auto mt-2 text-sm text-indigo-600">
                          {timerActif ? 'Pause' : 'Reprendre'}
                        </button>
                      </div>
                    )}
                    {config.mortSubite && (
                      <div className="flex justify-center gap-8 mb-4">
                        <div className="text-center">
                          <div className="text-sm text-gray-600">{matchEnCours.prenomJ1} {matchEnCours.joueur1}</div>
                          <div className="flex gap-1 mt-1">
                            {[1, 2, 3].map(i => (
                              <div key={i} className={`w-3 h-3 rounded-full ${i <= matchEnCours.pointsDoublesJ2 ? 'bg-red-500' : 'bg-gray-300'}`} />
                            ))}
                          </div>
                        </div>
                        <div className="text-center">
                          <div className="text-sm text-gray-600">{matchEnCours.prenomJ2} {matchEnCours.joueur2}</div>
                          <div className="flex gap-1 mt-1">
                            {[1, 2, 3].map(i => (
                              <div key={i} className={`w-3 h-3 rounded-full ${i <= matchEnCours.pointsDoublesJ1 ? 'bg-red-500' : 'bg-gray-300'}`} />
                            ))}
                          </div>
                        </div>
                      </div>
                    )}
                    <div className="grid grid-cols-3 gap-4 items-center">
                      <div className="text-center">
                        <h3 className="text-xl font-bold mb-2">{matchEnCours.prenomJ1} {matchEnCours.joueur1}</h3>
                        <div className="text-6xl font-bold text-blue-600">{matchEnCours.scoreJ1}</div>
                      </div>
                      <div className="text-center">
                        <div className="text-4xl font-bold text-gray-400">VS</div>
                        {matchEnCours.coteChange && <div className="text-xs text-green-600 font-semibold mt-2">C√¥t√© chang√© ‚úì</div>}
                      </div>
                      <div className="text-center">
                        <h3 className="text-xl font-bold mb-2">{matchEnCours.prenomJ2} {matchEnCours.joueur2}</h3>
                        <div className="text-6xl font-bold text-red-600">{matchEnCours.scoreJ2}</div>
                      </div>
                    </div>
                  </div>
                  <div className="grid md:grid-cols-2 gap-6">
                    <div className="bg-white rounded-xl shadow-lg p-6">
                      <h3 className="text-xl font-bold text-blue-600 mb-4">{matchEnCours.prenomJ1} {matchEnCours.joueur1}</h3>
                      <div className="space-y-3">
                        <button onClick={() => ajouterPoint('j1', 'normal')} className="w-full bg-blue-500 text-white py-4 rounded-lg font-semibold">
                          Point normal (+1)
                        </button>
                        {getButtonForObjet('j1')}
                      </div>
                      <div className="mt-4 p-3 bg-blue-50 rounded-lg">
                        <p className="text-sm text-gray-600 mb-1">Stats</p>
                        <div className="grid grid-cols-3 gap-2 text-xs">
                          <div><span className="text-orange-600 font-semibold">{matchEnCours.statsJ1.zonesDangereuses}</span><span className="text-gray-500"> ZD</span></div>
                          <div><span className="text-purple-600 font-semibold">{matchEnCours.statsJ1.smashAnnonces}</span><span className="text-gray-500"> SA</span></div>
                          <div><span className="text-green-600 font-semibold">{matchEnCours.statsJ1.zonesLibres}</span><span className="text-gray-500"> ZL</span></div>
                        </div>
                      </div>
                    </div>
                    <div className="bg-white rounded-xl shadow-lg p-6">
                      <h3 className="text-xl font-bold text-red-600 mb-4">{matchEnCours.prenomJ2} {matchEnCours.joueur2}</h3>
                      <div className="space-y-3">
                        <button onClick={() => ajouterPoint('j2', 'normal')} className="w-full bg-red-500 text-white py-4 rounded-lg font-semibold">
                          Point normal (+1)
                        </button>
                        {getButtonForObjet('j2')}
                      </div>
                      <div className="mt-4 p-3 bg-red-50 rounded-lg">
                        <p className="text-sm text-gray-600 mb-1">Stats</p>
                        <div className="grid grid-cols-3 gap-2 text-xs">
                          <div><span className="text-orange-600 font-semibold">{matchEnCours.statsJ2.zonesDangereuses}</span><span className="text-gray-500"> ZD</span></div>
                          <div><span className="text-purple-600 font-semibold">{matchEnCours.statsJ2.smashAnnonces}</span><span className="text-gray-500"> SA</span></div>
                          <div><span className="text-green-600 font-semibold">{matchEnCours.statsJ2.zonesLibres}</span><span className="text-gray-500"> ZL</span></div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div className="grid md:grid-cols-2 gap-4 mt-6">
                    <button onClick={() => { if (confirm('Terminer ce match ?')) terminerMatch(); }}
                      className="bg-indigo-600 text-white py-4 rounded-lg font-semibold">Terminer le match</button>
                    <button onClick={annulerDernierPoint} disabled={historiquePoints.length === 0}
                      className="bg-orange-600 text-white py-4 rounded-lg font-semibold disabled:bg-gray-300 flex items-center justify-center gap-2 transition">
                      <RotateCcw className="w-5 h-5" />Annuler dernier point ({historiquePoints.length})
                    </button>
                  </div>
                  <div className="mt-4">
                    <button onClick={() => {
                        if (confirm('Annuler ce match ?')) { setMatchEnCours(null); setHistoriquePoints([]); setTimerActif(false); setPhase('selection'); }
                      }}
                      className="w-full bg-gray-600 text-white py-3 rounded-lg font-semibold">Annuler le match</button>
                  </div>
                </div>
                {showTerrain && (
                  <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
                    <div className="bg-white rounded-xl p-6 max-w-lg w-full">
                      <h3 className="text-xl font-bold mb-4 text-center">O√π le point a √©t√© marqu√© ? üè∏</h3>
                      <div className="mb-6 bg-gradient-to-br from-green-700 to-green-600 p-4 rounded-lg">
                        <svg viewBox="0 0 100 100" className="w-full bg-green-800 rounded-lg border-4 border-white">
                          <rect x="5" y="5" width="90" height="90" fill="#1a5e1a" stroke="#fff" strokeWidth="2"/>
                          <line x1="50" y1="5" x2="50" y2="95" stroke="#fff" strokeWidth="1.5"/>
                          <line x1="5" y1="50" x2="95" y2="50" stroke="#fff" strokeWidth="2"/>
                          <line x1="5" y1="30" x2="95" y2="30" stroke="#fff" strokeWidth="1" strokeDasharray="2,2"/>
                          <line x1="5" y1="70" x2="95" y2="70" stroke="#fff" strokeWidth="1" strokeDasharray="2,2"/>
                          <rect x="48" y="5" width="4" height="90" fill="#333" opacity="0.3"/>
                          <rect x="10" y="10" width="35" height="35" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.5)" strokeWidth="1"/>
                          <text x="27.5" y="30" textAnchor="middle" fill="#fff" fontSize="8" fontWeight="bold">AVANT</text>
                          <text x="27.5" y="38" textAnchor="middle" fill="#fff" fontSize="8" fontWeight="bold">GAUCHE</text>
                          <rect x="55" y="10" width="35" height="35" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.5)" strokeWidth="1"/>
                          <text x="72.5" y="30" textAnchor="middle" fill="#fff" fontSize="8" fontWeight="bold">AVANT</text>
                          <text x="72.5" y="38" textAnchor="middle" fill="#fff" fontSize="8" fontWeight="bold">DROITE</text>
                          <rect x="10" y="55" width="35" height="35" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.5)" strokeWidth="1"/>
                          <text x="27.5" y="74" textAnchor="middle" fill="#fff" fontSize="8" fontWeight="bold">ARRI√àRE</text>
                          <text x="27.5" y="82" textAnchor="middle" fill="#fff" fontSize="8" fontWeight="bold">GAUCHE</text>
                          <rect x="55" y="55" width="35" height="35" fill="rgba(255,255,255,0.1)" stroke="rgba(255,255,255,0.5)" strokeWidth="1"/>
                          <text x="72.5" y="74" textAnchor="middle" fill="#fff" fontSize="8" fontWeight="bold">ARRI√àRE</text>
                          <text x="72.5" y="82" textAnchor="middle" fill="#fff" fontSize="8" fontWeight="bold">DROITE</text>
                        </svg>
                      </div>
                      <div className="grid grid-cols-2 gap-3 mb-6">
                        {[1, 2, 3, 4].map(zone => {
                          const labels = ['Avant Gauche', 'Avant Droite', 'Arri√®re Gauche', 'Arri√®re Droite'];
                          const colors = zone <= 2 ? 'from-green-500 to-green-600' : 'from-green-700 to-green-800';
                          return (
                            <button key={zone} onClick={() => {
                                const type = config.objetEnseignement === 'zones' ? 'zoneDangereuse' : 'zoneLibre';
                                ajouterPointAvecZone(showTerrain, type, zone);
                                setShowTerrain(false);
                              }}
                              className={`bg-gradient-to-br ${colors} hover:scale-105 text-white py-8 rounded-lg font-bold shadow-lg transform transition`}>
                              <div className="text-2xl mb-1">{zone <= 2 ? '‚¨ÜÔ∏è' : '‚¨áÔ∏è'}</div>
                              <div>{labels[zone - 1]}</div>
                            </button>
                          );
                        })}
                      </div>
                      <button onClick={() => setShowTerrain(false)} className="w-full bg-gray-600 text-white py-3 rounded-lg font-semibold">Annuler</button>
                    </div>
                  </div>
                )}
              </div>
            );
          }

          if (phase === 'stats') {
            return (
              <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4">
                <div className="max-w-4xl mx-auto">
                  <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <h2 className="text-2xl font-bold mb-6 flex items-center gap-2">
                      <TrendingUp className="w-6 h-6 text-indigo-600" />Statistiques - {config.classe}
                    </h2>
                    <div className="space-y-4">
                      {Object.values(donnees).sort((a, b) => b.matchsGagnes - a.matchsGagnes).map((joueur, index) => (
                        <div key={joueur.nom} className="bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg p-5">
                          <div className="flex items-center gap-3 mb-3">
                            <span className="text-2xl font-bold text-gray-400">#{index + 1}</span>
                            <h3 className="text-xl font-bold">{joueur.prenom} {joueur.nom}</h3>
                          </div>
                          <div className="grid grid-cols-2 md:grid-cols-5 gap-4 mb-3">
                            <div className="text-center">
                              <div className
                                ="text-2xl font-bold text-indigo-600">{joueur.matchsGagnes}/{joueur.matchsJoues}</div>
                              <div className="text-xs text-gray-600">Victoires</div>
                            </div>
                            <div className="text-center">
                              <div className="text-2xl font-bold text-orange-600">{joueur.zonesDangereuses}</div>
                              <div className="text-xs text-gray-600">Zones dangereuses</div>
                            </div>
                            <div className="text-center">
                              <div className="text-2xl font-bold text-purple-600">{joueur.smashAnnonces}</div>
                              <div className="text-xs text-gray-600">Smashs annonc√©s</div>
                            </div>
                            <div className="text-center">
                              <div className="text-2xl font-bold text-green-600">{joueur.zonesLibres}</div>
                              <div className="text-xs text-gray-600">Zones libres</div>
                            </div>
                            <div className="text-center">
                              <div className="text-2xl font-bold text-blue-600">{joueur.pointsDoubles}</div>
                              <div className="text-xs text-gray-600">Points doubles</div>
                            </div>
                          </div>
                          {joueur.victoires && joueur.victoires.length > 0 && (
                            <div className="mb-3 p-3 bg-white rounded-lg">
                              <p className="text-sm font-semibold mb-2">Indices de r√©ussite :</p>
                              <div className="space-y-1">
                                {joueur.victoires.map((v, i) => (
                                  <div key={i} className="flex items-center justify-between text-xs">
                                    <span>vs {v.adversaire}</span>
                                    <span className="flex items-center gap-2">
                                      <span className="text-gray-600">{v.score}</span>
                                      <span className={`font-bold ${v.indice.couleur}`}>{v.indice.icon} {v.indice.texte}</span>
                                      <span className="text-gray-500">({v.bonus} bonus)</span>
                                    </span>
                                  </div>
                                ))}
                              </div>
                            </div>
                          )}
                          {joueur.pointsTerrain && joueur.pointsTerrain.length > 0 && (
                            <div className="mt-3">
                              <TerrainBadminton points={joueur.pointsTerrain} joueurNom={`${joueur.prenom} ${joueur.nom}`} />
                            </div>
                          )}
                          <div className="pt-3 border-t border-gray-300 text-sm text-gray-600 text-center">
                            Points: <span className="font-semibold text-green-600">{joueur.pointsMarques}</span> marqu√©s / 
                            <span className="font-semibold text-red-600"> {joueur.pointsEncaisses}</span> encaiss√©s
                            {joueur.defaitesMortSubite > 0 && (
                              <span className="ml-2 text-red-600 font-semibold">| ‚ö†Ô∏è {joueur.defaitesMortSubite} mort subite</span>
                            )}
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                  <button onClick={() => setPhase('selection')} className="w-full bg-indigo-600 text-white py-4 rounded-lg font-semibold">
                    Retour
                  </button>
                </div>
              </div>
            );
          }

          return null;
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<BadmintonTracker />);
    </script>
     <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(reg => console.log('‚úÖ Service Worker enregistr√©'))
                    .catch(err => console.error('‚ùå Erreur Service Worker:', err));
            });
        }
    </script>
</body>
</html>
